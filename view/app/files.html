{{- /* files.html */}}
{{- /* TODO: VirusTotal alert, JS Music player to play in this view, a video player? */}}
{{- define "content" }}
{{- $files := index .stats.files }}
{{- $years := index .stats.years}}
{{- $cnt := len .records}}
{{- $cardClass := " h-100"}} 
<p class="text-start lead"><small>There {{if eq $cnt 1}}is{{else}}are{{end}} {{$files | safeHTML}} from {{$years | safeHTML}}.</small> 
  ({{$cnt}} records / {{index .Pagination.SumPages}} pages)</p>  {{/*  TODO: pass through an IsProd config  */}}
<div class="row justify-content-md-center row-cols-1 row-cols-md-3 g-4 mt-1">
  {{- range .records }}
  <div class="col">
    <div class="card{{$cardClass}} placeholder-glow">
      {{thumb .UUID.String .Filename.String}}
      <div class="card-body">
        <h5 class="card-title text-truncate">{{linkRelrs .GroupBrandFor .GroupBrandBy }}</h5>
        {{subTitle .RecordTitle}}
        <p class="card-text">{{describe .Platform .Section .DateIssuedYear .DateIssuedMonth}}</p>
        <p class="card-text"><small class="text-body-secondary">{{lastUpdated .Updatedat}}</small></p>
        {{linkPage .ID}}
        {{linkDownload .ID}}{{ sizeOfDL .Filesize}}
      </div>
      <div class="card-footer text-body-secondary text-center">
        <code>{{.Filename.String}}</code>
      </div>
    </div>
  </div>
  {{- end}}
</div>
{{- end}}
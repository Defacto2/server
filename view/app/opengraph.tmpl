{{- define "opengraph" }}
{{- /*
The Open Graph protocol, https://ogp.me

Basic Metadata
og:title 
  - The title of your object as it should appear within the graph, e.g., "The Rock".

og:image 
  - An image URL which should represent your object within the graph.
    og:image:alt - A description of what is in the image (not a caption). If the page specifies an og:image it should specify og:image:alt.

og:url 
  - The canonical URL of your object that will be used as its permanent ID 
    in the graph, e.g., "https://www.imdb.com/title/tt0117500/".

og:type 
  - The type of your object, e.g., "video.movie". Depending on the type you specify, 
    other properties may also be required.
  - "article"
      article:published_time - datetime - When the article was first published.
      article:modified_time - datetime - When the article was last changed.
      article:expiration_time - datetime - When the article is out of date after.
      article:author - profile array - Writers of the article.
      article:section - string - A high-level section name. E.g. Technology
      article:tag - string array - Tag words associated with this article.
  - "book"
      book:author - profile array - Who wrote this book.
      book:isbn - string - The ISBN
      book:release_date - datetime - The date the book was released.
      book:tag - string array - Tag words associated with this book.
  - "profile"
      profile:first_name - string - A name normally given to an individual by a parent or self-chosen.
      profile:last_name - string - A name inherited from a family or marriage and by which the individual is commonly known.
      profile:username - string - A short unique string to identify them.
      profile:gender - enum(male, female) - Their gender.
  - "website"

Optional Metadata
og:description 
  - A one to two sentence description of your object.
og:determiner 
  - The word that appears before this object's title in a sentence. 
    An enum of (a, an, the, "", auto). If auto is chosen, the consumer of your data 
    should choose between "a" or "an". Default is "" (blank).
og:site_name 
  - If your object is part of a larger web site, the name which should be 
    displayed for the overall site. e.g., "IMDb".

With no metadata Facebook responds
Based on the raw tags, we constructed the following Open Graph properties
1)
og:url	https://defacto2.net/
og:title	Welcome | Defacto2
og:image	https://defacto2.net/image/layout/favicon.svg
og:description	Defacto2, preserving the historic and defunct software cracking, wares, and Warez Scene subcultures on obsolete personal computers
og:updated_time	1755392340
og:image:alt	Defacto2 floppy disc logo
2)
og:url	https://defacto2.net/f/a319104
og:title	HHM.zip | Defacto2
og:image	https://defacto2.net/image/layout/favicon.svg
og:description	Hard Hat Mack released by The Duplicators in 1984
og:updated_time	1755392511
og:image:alt	Defacto2 floppy disc logo

- "twitter:card" is used by Discord.
- "fediverse:creator" is used by Mastodon.

*/ -}}
{{- $ogtitle := index . "ogtitle"}}
{{- if eq $ogtitle ""}}{{- $ogtitle = index . "title"}}{{end}}
{{- $metatitle := .title}}
{{- $subheading := index . "subheading"}}
{{- $unid := index . "unid"}}
{{- $ogimage := og_image $unid}}
{{- $desc := index . "description"}}
{{- $canonical := index . "canonical"}}
    <meta property="og:title" content="{{$ogtitle | safeHTML}}">
    <meta property="og:site_name" content="Defacto2">
    <meta property="og:type" content="website">
{{- if ne $canonical ""}}
    <meta property="og:url" content="{{$canonical | safeHTML}}">
{{- end}}
    <meta property="og:image" content="{{$ogimage | safeHTML}}">
    <meta property="og:image:alt" content="Defacto2 scene artifact">
{{- if ne $desc ""}}
    <meta property="og:description" content="{{$desc | safeHTML}}">
{{- end}}
    <meta name="twitter:card" content="summary_large_image">
    <meta name="fediverse:creator" content="@defacto2@mas.to">
{{ end }}


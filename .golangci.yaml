# .golangci.yaml
# Configure the golangci-lint linter that analyzes source code to flag programming errors,
# bugs, stylistic errors, and suspicious constructs.
# https://golangci-lint.run/
#
# To run the linter use either of the following commands:
# $ task lint
# $ golangci-lint run
#
linters:
  enable-all: true
  fast: false
  # Disable specific linters.
  disable:
    # deprecated
    - deadcode
    - exhaustivestruct
    - golint
    - ifshort
    - interfacer
    - maligned
    - nosnakecase
    - scopelint
    - structcheck
    - varcheck
    # disabled
    - depguard # imports are in a list of acceptable packages.
    - exhaustive # checks exhaustiveness of enum switch statements.
    - exhaustruct # finds structures with uninitialized fields.
    - ireturn # conflicts with sqlboiler.
    - nlreturn # fussy over whitespace.
    - paralleltest # requires a lot of refactoring.
    - varnamelen # a popular linter but is not idiomatic.
    #- wrapcheck # check that errors from external packages are wrapped during return to help identify the error source.
    - wsl # fussy over whitespace.
    # temporary disabled
    - godox
    - dupl
    - gosec
issues:
  exclude-rules:
    - path: _test\.go$
      linters: # Tests are allowed to be longer.
        - funlen
    - path: handler/router.go
      linters: # The router is allowed to be longer.
        - funlen
        - wrapcheck
    - path: handler/app/app.go
      linters: # temporary disabled.
        - gosec
    - path: handler/app/context.go
      linters: # temporary disabled.
        - wrapcheck
    - path: handler/app/accordion.go
      linters: # HTML content containing long form text.
        - funlen
        - lll
    - path: handler/app/interview.go
      linters: # HTML content containing long form text.
        - funlen
    - path: handler/app/milestone.go
      linters: # HTML content containing long form text.
        - funlen
        - lll
        - maintidx
    - path: internal/config/config.go
      linters: # caarlos0/env package uses structs with long declarations.
        - lll
        - tagalign
    - path: internal/demozoo/demozoo.go
      linters: # false positives with the Demozoo API.
        - tagliatelle
    - path: internal/demozoo/demozoo_test.go
      linters: # false positives with the Demozoo API.
        - tagliatelle
    - path: internal/jsdos/jsdos.go
      linters: # long struct comments.
        - lll
    - path: internal/postgres/postgres.go
      linters: # caarlos0/env package uses structs with long declarations.
        - lll
        - tagalign
    - path: internal/pouet/pouet.go
      linters: # false positives with the Pouet API.
        - tagliatelle
    - path: internal/web/web.go
      linters: # A custom map that reads easier with long declarations.
        - funlen
        - maintidx

linters-settings:
  cyclop:
    # The maximal code complexity to report.
    # Default: 10
    max-complexity: 17
    skip-tests: true
  funlen:
    # Maximum function length in lines.
    # Default: 50
    lines: 60
    statements: 45
    ignore-comments: true
  gomnd:
    # List of file patterns to exclude from analysis.
    # Values always ignored: `.+_test.go`
    # Default: []
    ignored-files: # magic number false positives.
      - "milestone.go"
      - "interview.go"
      - "zoo.go"
  misspell:
    # Correct spellings using locale preferences for US or UK.
    # Setting locale to US will correct the British spelling of 'colour' to 'color'.
    # Default is to use a neutral variety of English.
    locale: US
    # Default: []
    ignore-words:
      - "Teh" # Teh Scene.

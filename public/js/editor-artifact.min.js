/* editor-artifact.min.js © Defacto2 2024 */
(()=>{function U(e,r,i){if(e==null)throw new Error("The year input element is null.");if(r==null)throw new Error("The month input element is null.");if(i==null)throw new Error("The day input element is null.");e.classList.remove("is-invalid","is-valid"),r.classList.remove("is-invalid","is-valid"),i.classList.remove("is-invalid","is-valid");let l=parseInt(e.value,10);isNaN(l)?e.value="0":e.value=l;let n=parseInt(r.value,10);isNaN(n)?r.value="0":r.value=n;let a=parseInt(i.value,10);isNaN(a)?i.value="0":i.value=a;let s=0,p=new Date().getFullYear(),v=l>=1980&&l<=p;l>s&&!v&&e.classList.add("is-invalid");let T=n>=1&&n<=12;n>s&&!T&&r.classList.add("is-invalid");let I=a>=1&&a<=31;a>s&&!I&&i.classList.add("is-invalid"),isNaN(l)&&(T||I)&&e.classList.add("is-invalid"),(n==s||isNaN(n))&&I&&r.classList.add("is-invalid")}function we(e){return ye(e,!0)}function Le(e){return ye(e,!1)}function ye(e,r){if(e==null)throw new Error("The repository URL element is null.");e.classList.remove("is-valid","is-invalid");let i=e.value.trim();if(i.length===0)return;if(r==!0&&i.startsWith("refs/")){e.classList.add("is-invalid");return}if(i.includes("://")){e.classList.add("is-invalid");return}let n=/[^A-Za-z0-9-._/]/g;i=i.replace(n,""),i=i.replaceAll("//","/");let a=/^\//;i=i.replace(a,""),e.value=i;let s=e.getAttribute("maxlength");if(s===null)throw new Error(`The maxlength attribute is required for ${e.id}.`);if(i.length>s){e.classList.add("is-invalid");return}}function D(e){if(e==null)throw new Error("The element of the releaser validator is null.");e.classList.remove("is-valid","is-invalid");let r=e.value.trimStart().toUpperCase();r=r.replace("+",", "),r=r.replace(/[^ A-ZÀ-ÖØ-Þ0-9\-,&]/g,""),r=r.replace(/[ ]{2,}/g," "),e.value=r;let i=e.getAttribute("minlength"),l=e.getAttribute("maxlength"),n=e.getAttribute("required");if(i===null)throw new Error(`The minlength attribute is required for ${e.id}.`);if(l===null)throw new Error(`The maxlength attribute is required for ${e.id}.`);let a=document.getElementById("artifact-editor-releasers-error");if(a===null)throw new Error("The releasers error element is null.");let s=r.length<i||r.length>l;if(n!=null&&s){e.classList.add("is-invalid"),e.id==="-1"&&a.classList.add("d-block");return}let p=r.length>0&&(r.length<i||r.length>l);if(n==null&&p){e.classList.add("is-invalid");return}e.classList.remove("is-invalid"),a.classList.remove("d-block")}function be(e){if(e==null)throw new Error("The element of the releaser validator is null.");e.classList.remove("is-valid","is-invalid");let r=e.value.trim();r.length>0&&r.length!=11&&e.classList.add("is-invalid")}function Z(e,r){if(e==null)throw new Error("The element of the number validator is null.");e.classList.remove("is-valid","is-invalid");let i=parseInt(e.value,10);isNaN(i)&&e.classList.add("is-invalid"),(i>r||i<0)&&e.classList.add("is-invalid")}function Be(e){let r=["a","addon","aka","an","and","as","at","beta","betas","but","by","compatibility","crack","cracks","demo","demos","doc","docs","documentation","fix","fixes","for","final","from","if","in","installer","installers","is","hint","hints","map","maps","mod","mods","of","on","or","patch","patches","part","prerelease","prereleases","preview","previews","proper","release","releases","repack","repacks","rip","rips","so","solve","solves","the","trainer","trainers","to","vs","with"],i=[".com",".exe","2d","3d","4d","abc","ad&d","api","bbs","bios","cd","cga","dos","dox","ega","ehq","f1","ftp","hq","ibm","id","iso","la","ls","masm","mbl","ms","nascar","nba","ncaa","nfl","nfo","nhl","nt","oem","os","pc","pfs","pkarc","pkzip","psx","rac","rom","usa","ushq","uss","vga","whq","ww1","ww2","ww3","wwf","xp","ys"];e=e.trim(),e=e.replace(/_/g," "),e.match(/\./g)&&e.match(/\./g).length>4&&(e=e.replace(/\./g," ")),e=e.replace(/['"`]/g,""),e=e.replace(/ \([0-9a-z]\)/g,""),e=e.replace(/([a-zA-Z0-9]): /g,"$1 : "),e=e.replace(/([xX][-| ][Mm]en)/g,"X-Men"),e=e.replace(/\(/g,"( "),e=e.replace(/\)/g," )");let l=e.split(" ").length;return e=e.split(" ").map((n,a)=>{console.log(`word: ${n} ${a} ${typeof n}`);var s=n;if(De(s)===!0)return s.toLowerCase();if(i.includes(s.toLowerCase()))return s.toUpperCase();let p=Me(s);if(p!=="")return p;let v=qe(s);a>0&&Number.isInteger(v)&&(s=`${v}`);let T=Ne(s,a,l);return T!==s&&(s=T),console.log(`edit: ${s} ${n}`,n!==s),n!==s?s:a===0||!r.includes(s.toLowerCase())?s.charAt(0).toUpperCase()+s.slice(1).toLowerCase():n.toLowerCase()}).join(" ").trim(),e=e.replace(/(Lotus 123)/g,"Lotus 1-2-3"),e=e.replace(/(Falcon at )/g,"Falcon AT "),e=e.replace(/(the Games)/g,"The Games"),e=e.replace(/( : a)/g," : A"),e=e.replace(/( - a)/g," - A"),e=e.replace(/( : t)/g," : T"),e=e.replace(/( - t)/g," - T"),e=e.replace(/(f-)/g,"F-"),e=e.replace(/(3-d)/g,"3D"),e=e.replace(/(Pfs-)/g,"PFS-"),e=e.replace(/(Mean-18)/g,"Mean 18"),e=e.replace(/\( /g,"("),e=e.replace(/ \)/g,")"),e=e.replace(/\[([^)]+)\]/g,function(n){return n.toUpperCase()}),e}function De(e){return/^[vV]\d+(\.\d+)?[a-z]?$/i.test(e)}function Ne(e,r,i){return r!=i-1?e:["cheat","cheater","cracktro","loader","installer","trainer","version"].includes(e.toLowerCase())?"":e}function qe(e){let r={I:1,V:5,X:10},i=0,l=0;for(let n=e.length-1;n>=0;n--){let a=r[e[n].toUpperCase()];a<l?i-=a:i+=a,l=a}return i==0?e:i}function Me(e){switch(e.toLowerCase()){case"dr.":return"Dr";case"jr.":return"Jr";case"ms.":return"Ms";case"abcs":return"ABCs";case"cdrip":case"cd-rip":return"CD RIP";case"pre-release":return"prerelease";case"&":return"and";case"ad+d":return"AD&D";case"][":case"||":return"2";case"]|[":case"]I[":return"3";case"]||[":case"]II[":return"4";case" I:":return" 1 :";case" II:":return" 2 :";case" III:":return" 3 :";case"at&t":return"AT&T";case"dbase":return"dBase";case"doubledos":return"DoubleDOS";case"fastback":return"FastBack";case"loadit":return"LoadIt";case"memoryshift":return"Memory Shift";case"multilink":return"MultiLink";case"paperboy":return"PaperBoy";case"pc-draw":return"PC-Draw";case"pcjr":return"PCjr";case"prokey":return"ProKey";case"rbase":case"r:base":return"R:Base";case"sidekick":return"SideKick";case"visicalc":return"VisiCalc";case"war-craft":return"Warcraft";case"wordstar":return"WordStar";default:return""}}async function N(e){let r=h(e);r.focus(),await navigator.clipboard.writeText(`${r.value}`).then(function(){console.log(`Copied ${Re(r.value.length)} to the clipboard`)},function(i){console.error(`could not save any text to the clipboard: ${i}`)})}function h(e){let r=document.getElementById(e);if(r==null){console.error(`The ${e} for getElmById() element is null.`);return}return r}function Re(e=0){let n=Math.pow(1e3,2),a=Math.pow(1e3,3);return e>a?`${(Math.round(e*100/a)/100).toFixed(2)} GB`:e>n?`${(Math.round(e*100/n)/100).toFixed(1)} MB`:e>1e3?`${(Math.round(e*100/1e3)/100).toFixed()} kB`:`${Math.round(e).toFixed()} bytes`}(()=>{"use strict";function e(t){return function(){t.forEach(o=>{o.disabled=!0,o.classList.remove("btn-outline-primary"),o.classList.add("btn-light")})}}function r(t){return function(){t.forEach(o=>{o.disabled=!1,o.classList.remove("btn-light"),o.classList.add("btn-outline-primary")})}}let i=document.getElementById("artifact-editor-modal"),l=document.getElementsByName("artifact-editor-dataeditor");i.addEventListener("shown.bs.modal",()=>{e(l)()}),i.addEventListener("hidden.bs.modal",()=>{r(l)()});let n=document.getElementById("asset-editor-modal"),a=document.getElementsByName("artifact-editor-fileeditor");n.addEventListener("shown.bs.modal",()=>{e(a)()}),n.addEventListener("hidden.bs.modal",()=>{r(a)()});let s=document.getElementById("emulate-editor-modal"),p=document.getElementsByName("artifact-editor-emueditor");s.addEventListener("shown.bs.modal",()=>{e(p)()}),s.addEventListener("hidden.bs.modal",()=>{r(p)()});let v=document.getElementById("emulate-run-program");if(v!==null){let t=document.getElementById("emulate-guess-program");if(t===null)throw new Error("The guess program input is missing.");v.addEventListener("input",()=>{if(v.value=v.value.toUpperCase(),v.value!==""){t.disabled=!0;return}t.disabled=!1})}if(h("artifact-editor-key-value")===null)throw new Error("The key value is missing.");let I=h("artifact-editor-key-label");if(I===null)throw new Error("The key label is missing.");if(I.addEventListener("click",()=>N("artifact-editor-key-value")),h("artifact-editor-unique-id-value")===null)throw new Error("The unique id value is missing.");let H=h("artifact-editor-unique-id-label");if(H===null)throw new Error("The unique id label is missing.");if(H.addEventListener("click",()=>N("artifact-editor-unique-id-value")),h("artifact-editor-location-value")===null)throw new Error("The location value is missing.");let K=h("artifact-editor-location-label");if(K===null)throw new Error("The location label is missing.");K.addEventListener("click",()=>N("artifact-editor-location-value"));let _=h("artifact-editor-templocation");if(_!=null){let t=h("artifact-editor-templocation-label");t!==null&&t.addEventListener("click",()=>N("artifact-editor-templocation"))}if(document.getElementById("artifact-editor-os-label")===null)throw new Error("The operating system label is missing.");let w=document.getElementById("artifact-editor-operating-system");if(w===null)throw new Error("The operating system input is missing.");w.addEventListener("input",P);let L=document.getElementById("artifact-editor-category");if(L===null)throw new Error("The category input is missing.");L.addEventListener("input",z),P(),z();function P(){w.selectedIndex==0&&(w.classList.remove("is-valid"),w.classList.add("is-invalid"))}function z(){L.selectedIndex==0&&(L.classList.remove("is-valid"),L.classList.add("is-invalid"))}let S=document.getElementsByName("prereset-classifications");if(S.length===0)throw new Error("The preset classifications are missing.");for(let t=0;t<S.length;t++)Te(t);function Te(t){let o=S[t],g=o.getAttribute("data-preset-os");if(g===null)throw new Error("data-preset-os attribute is required for ${elm.id}.");let m=o.getAttribute("data-preset-tag");if(m===null)throw new Error("data-preset-tag attribute is required for ${elm.id}.");o.addEventListener("click",$=>{$.preventDefault(),w.value=g,w.classList.remove("is-invalid"),L.value=m,L.classList.remove("is-invalid"),P(),z()})}let E=document.getElementById("artifact-editor-filename");if(E===null)throw new Error("The filename input is missing.");E.addEventListener("input",t=>{t.target.classList.remove("is-valid"),t.target.classList.remove("is-invalid"),t.target.value.trim().length===0&&t.target.classList.add("is-invalid")});let J=document.getElementById("artifact-editor-filename-reset");if(J===null)throw new Error("The filename reset is missing.");let x=document.getElementsByName("artifact-editor-filename-undo");if(x.length===0)throw new Error("The filename resetter is missing.");J.addEventListener("click",()=>{if(E.classList.remove("is-valid"),x.length===0)throw new Error("The filename resetter is missing.");E.value=x[0].value,E.classList.add("is-valid"),E.classList.remove("is-invalid"),E.value.trim().length===0&&E.classList.add("is-invalid")});let C=document.getElementById("artifact-editor-releaser-1");if(C===null)throw new Error("The releaser 1 input is missing.");C.addEventListener("input",t=>D(t.target));let A=document.getElementById("artifact-editor-releaser-2");if(A===null)throw new Error("The releaser 2 input is missing.");A.addEventListener("input",t=>D(t.target));let Q=document.getElementById("artifact-editor-releaser-undo");if(Q===null)throw new Error("The releasers reset is missing.");Q.addEventListener("click",Ie);function Ie(){let t=C.getAttribute("data-reset-rel1");if(t===null)throw new Error("data-reset-rel1 attribute is required for artifact-editor-releaser-1.");C.value=t,D(C);let o=A.getAttribute("data-reset-rel2");if(o===null)throw new Error("data-reset-rel2 attribute is required for artifact-editor-releaser-2.");A.value=o,D(A)}let f=document.getElementById("artifact-editor-title");if(f===null)throw new Error("The title input is missing.");f.addEventListener("input",t=>{t.target.classList.remove("is-valid")});let ee=document.getElementById("artifact-editor-title-undo");if(ee===null)throw new Error("The title reset is missing.");let Y=document.getElementsByName("artifact-editor-titleundo");if(Y.length===0)throw new Error("The title resetter is missing.");ee.addEventListener("click",()=>{if(f.classList.remove("is-valid"),Y.length===0)throw new Error("The title resetter is missing.");f.value=Y[0].value,f.classList.add("is-valid")});let te=document.getElementById("artifact-editor-titleize");if(te.length===0)throw new Error("The titleize button is missing.");te.addEventListener("click",()=>{f.value=Be(f.value);let t=new Event("keyup");f.dispatchEvent(t)});let re=document.getElementById("artifact-editor-title-delete");if(re.length===0)throw new Error("The title delete button is missing.");re.addEventListener("click",()=>{f.value="";let t=new Event("keyup");f.dispatchEvent(t)});let V=document.getElementById("artifact-editor-credit-text");if(V===null)throw new Error("The creator text input is missing.");V.addEventListener("input",t=>{t.target.classList.remove("is-valid")});let j=document.getElementById("artifact-editor-credit-ill");if(j===null)throw new Error("The creator illustrator input is missing.");j.addEventListener("input",t=>{t.target.classList.remove("is-valid")});let G=document.getElementById("artifact-editor-credit-prog");if(G===null)throw new Error("The creator programmer input is missing.");G.addEventListener("input",t=>{t.target.classList.remove("is-valid")});let O=document.getElementById("artifact-editor-credit-audio");if(O===null)throw new Error("The creator audio input is missing.");O.addEventListener("input",t=>{t.target.classList.remove("is-valid")});let W=document.getElementById("artifact-editor-credits-undo");if(W===null)throw new Error("The creator resetter is missing.");let ie=document.getElementById("artifact-editor-credit-undo");if(ie===null)throw new Error("The creator reset is missing.");ie.addEventListener("click",()=>{if(W.length===0)throw new Error("The creator resetter is missing.");let t=W.value.split(";");if(t.length!=4)throw new Error("The creator resetter values are invalid.");let o=t[0],g=t[1],m=t[2],$=t[3];V.value=o,j.value=g,G.value=m,O.value=$});let ne=document.getElementById("artifact-editor-virustotal");if(ne===null)throw new Error("The virustotal input is missing.");ne.addEventListener("input",t=>{t.target.classList.remove("is-valid","is-invalid");let o=t.target.value.trim();o.length!=0&&(o.startsWith("https://www.virustotal.com/")||t.target.classList.add("is-invalid"))});let d=document.getElementById("artifact-editor-year");if(d===null)throw new Error("The year input is missing.");d.addEventListener("input",()=>{let t=parseInt(d.value,10);t>=79&&t<=99&&(d.value=1900+t),U(d,c,u)});let c=document.getElementById("artifact-editor-month");if(c===null)throw new Error("The month input is missing.");c.addEventListener("input",()=>{U(d,c,u)});let u=document.getElementById("artifact-editor-day");if(u===null)throw new Error("The day input is missing.");u.addEventListener("input",()=>{U(d,c,u)});let se=document.getElementById("artifact-editor-date-reset");if(se===null)throw new Error("The date reset is missing.");let ae=document.getElementById("artifact-editor-date-resetter");if(ae===null)throw new Error("The date resetter is missing.");se.addEventListener("click",()=>{d.classList.remove("is-invalid","is-valid"),c.classList.remove("is-invalid","is-valid"),u.classList.remove("is-invalid","is-valid");let o=ae.value.split("-");if(o.length!=3)throw new Error("The date resetter values are invalid.");d.value=o[0],c.value=o[1],u.value=o[2]});let q=document.getElementById("artifact-editor-comment");if(q===null)throw new Error("The comment input is missing.");q.addEventListener("input",t=>{if(t.target.classList.remove("is-valid"),(d.value==0&&c.value==0&&u.value==0)==!1)return;let m=/(0[1-9]|1[0-2])\/(0[1-9]|[12][0-9]|3[01])\/(\d{2})/.exec(t.target.value);if(m||(m=/(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])-(\d{2})/.exec(t.target.value)),m){let $=m[1],Ce=m[2],Ae=m[3],F=parseInt(Ae,10);d.value=2e3+F,F>=79&&F<=99&&(d.value=1900+F),c.value=$,u.value=Ce;let Ee=document.getElementById("artifact-editor-date-update");Ee!==null&&Ee.click()}});let oe=document.getElementById("artifact-editor-comment-undo");if(oe===null)throw new Error("The comment reset is missing.");let le=document.getElementById("artifact-editor-comment-resetter");if(le===null)throw new Error("The comment resetter is missing.");oe.addEventListener("click",()=>{q.classList.remove("is-valid"),q.value=le.value});let de=document.getElementById("artifact-editor-date-lastmod");if(de!==null){let t=document.getElementById("artifact-editor-date-lastmodder");if(t===null)throw new Error("The date last modder input is missing.");de.addEventListener("click",()=>{d.classList.remove("is-invalid","is-valid"),c.classList.remove("is-invalid","is-valid"),u.classList.remove("is-invalid","is-valid");let g=t.value.split("-");if(g.length!=3)throw new Error("The date last modder values are invalid.");d.value=g[0],c.value=g[1],u.value=g[2]})}let ce=document.getElementById("artifact-editor-links-reset");if(ce===null)throw new Error("The links reset is missing.");let y=document.getElementById("artifact-editor-youtube"),ue=document.getElementById("artifact-editor-youtube-reset");if(y===null||ue===null)throw new Error("A YouTube input is missing.");let M=document.getElementById("artifact-editor-demozoo"),me=document.getElementById("artifact-editor-demozoo-reset");if(M===null||me===null)throw new Error("A Demozoo input is missing.");let R=document.getElementById("artifact-editor-pouet"),ve=document.getElementById("artifact-editor-pouet-reset");if(R===null||ve===null)throw new Error("A Pouet input is missing.");let b=document.getElementById("artifact-editor-16colors"),fe=document.getElementById("artifact-editor-16colors-reset");if(b===null||fe===null)throw new Error("A 16colors input is missing.");let B=document.getElementById("artifact-editor-github"),ge=document.getElementById("artifact-editor-github-reset");if(B===null||ge===null)throw new Error("A GitHub input is missing.");let X=document.getElementById("artifact-editor-relations"),he=document.getElementById("artifact-editor-relations-reset");if(X===null||he===null)throw new Error("A relations input is missing.");let k=document.getElementById("artifact-editor-websites"),pe=document.getElementById("artifact-editor-websites-reset");if(k===null||pe===null)throw new Error("A websites input is missing.");k.addEventListener("paste",()=>{setTimeout(()=>{k.value=k.value.replace(/https?:\/\//,"")},0)}),ce.addEventListener("click",()=>{y.classList.remove("is-invalid","is-valid"),M.classList.remove("is-invalid","is-valid"),R.classList.remove("is-invalid","is-valid"),b.classList.remove("is-invalid","is-valid"),B.classList.remove("is-invalid","is-valid"),X.classList.remove("is-invalid","is-valid"),k.classList.remove("is-invalid","is-valid"),y.value=ue.value,M.value=me.value,R.value=ve.value,b.value=fe.value,B.value=ge.value,X.value=he.value,k.value=pe.value});let ke=45e4,$e=2e5;y.addEventListener("paste",()=>{setTimeout(()=>{y.value=y.value.replace(/https?:\/\/www.youtube.com\/watch\?v=/,"")},0)}),y.addEventListener("input",t=>be(t.target)),M.addEventListener("input",t=>Z(t.target,ke)),R.addEventListener("input",t=>Z(t.target,$e)),b.addEventListener("paste",()=>{setTimeout(()=>{b.value=b.value.replace(/https?:\/\/16colo.rs\//,"")},0)}),b.addEventListener("input",t=>Le(t.target)),B.addEventListener("paste",()=>{setTimeout(()=>{B.value=B.value.replace(/https?:\/\/github.com\//,"")},0)}),B.addEventListener("input",t=>we(t.target))})();})();

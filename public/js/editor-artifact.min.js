/* editor-artifact.min.js © Defacto2 2024 */
(()=>{function M(t,r,i){if(t==null)throw new Error("The year input element is null.");if(r==null)throw new Error("The month input element is null.");if(i==null)throw new Error("The day input element is null.");t.classList.remove("is-invalid","is-valid"),r.classList.remove("is-invalid","is-valid"),i.classList.remove("is-invalid","is-valid");let o=parseInt(t.value,10);isNaN(o)?t.value="0":t.value=o;let s=parseInt(r.value,10);isNaN(s)?r.value="0":r.value=s;let a=parseInt(i.value,10);isNaN(a)?i.value="0":i.value=a;let d=0,L=new Date().getFullYear(),E=o>=1980&&o<=L;o>d&&!E&&t.classList.add("is-invalid");let U=s>=1&&s<=12;s>d&&!U&&r.classList.add("is-invalid");let y=a>=1&&a<=31;a>d&&!y&&i.classList.add("is-invalid"),isNaN(o)&&(U||y)&&t.classList.add("is-invalid"),(s==d||isNaN(s))&&y&&r.classList.add("is-invalid")}function we(t){return Le(t,!0)}function pe(t){return Le(t,!1)}function Le(t,r){if(t==null)throw new Error("The repository URL element is null.");t.classList.remove("is-valid","is-invalid");let i=t.value.trim();if(i.length===0)return;if(r==!0&&i.startsWith("refs/")){t.classList.add("is-invalid");return}if(i.includes("://")){t.classList.add("is-invalid");return}let s=/[^A-Za-z0-9-._/]/g;i=i.replace(s,""),i=i.replaceAll("//","/");let a=/^\//;i=i.replace(a,""),t.value=i;let d=t.getAttribute("maxlength");if(d===null)throw new Error(`The maxlength attribute is required for ${t.id}.`);if(i.length>d){t.classList.add("is-invalid");return}}function I(t){if(t==null)throw new Error("The element of the releaser validator is null.");t.classList.remove("is-valid","is-invalid");let r=t.value.trimStart().toUpperCase();r=r.replace("+",", "),r=r.replace(/[^ A-ZÀ-ÖØ-Þ0-9\-,&]/g,""),r=r.replace(/[ ]{2,}/g," "),t.value=r;let i=t.getAttribute("minlength"),o=t.getAttribute("maxlength"),s=t.getAttribute("required");if(i===null)throw new Error(`The minlength attribute is required for ${t.id}.`);if(o===null)throw new Error(`The maxlength attribute is required for ${t.id}.`);let a=document.getElementById("artifact-editor-releasers-error");if(a===null)throw new Error("The releasers error element is null.");let d=r.length<i||r.length>o;if(s!=null&&d){t.classList.add("is-invalid"),t.id==="-1"&&a.classList.add("d-block");return}let L=r.length>0&&(r.length<i||r.length>o);if(s==null&&L){t.classList.add("is-invalid");return}t.classList.remove("is-invalid"),a.classList.remove("d-block")}function ye(t){if(t==null)throw new Error("The element of the releaser validator is null.");t.classList.remove("is-valid","is-invalid");let r=t.value.trim();r.length>0&&r.length!=11&&t.classList.add("is-invalid")}function Z(t,r){if(t==null)throw new Error("The element of the number validator is null.");t.classList.remove("is-valid","is-invalid");let i=parseInt(t.value,10);isNaN(i)&&t.classList.add("is-invalid"),(i>r||i<0)&&t.classList.add("is-invalid")}function be(t){let r=["a","an","and","as","but","for","if","of","or","so","the","to"];return t.split(" ").map((i,o)=>{let s=$e(i);return o>0&&Number.isInteger(s)?s:o===0||!r.includes(i.toLowerCase())?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():i.toLowerCase()}).join(" ")}function $e(t){let r={I:1,V:5,X:10},i=0,o=0;for(let s=t.length-1;s>=0;s--){let a=r[t[s].toUpperCase()];a<o?i-=a:i+=a,o=a}return i==0?t:i}async function x(t){let r=v(t);r.focus(),await navigator.clipboard.writeText(`${r.value}`).then(function(){console.log(`Copied ${Ae(r.value.length)} to the clipboard`)},function(i){console.error(`could not save any text to the clipboard: ${i}`)})}function v(t){let r=document.getElementById(t);if(r==null){console.error(`The ${t} for getElmById() element is null.`);return}return r}function Ae(t=0){let s=Math.pow(1e3,2),a=Math.pow(1e3,3);return t>a?`${(Math.round(t*100/a)/100).toFixed(2)} GB`:t>s?`${(Math.round(t*100/s)/100).toFixed(1)} MB`:t>1e3?`${(Math.round(t*100/1e3)/100).toFixed()} kB`:`${Math.round(t).toFixed()} bytes`}(()=>{"use strict";function t(e){return function(){e.forEach(n=>{n.disabled=!0,n.classList.remove("btn-outline-primary"),n.classList.add("btn-light")})}}function r(e){return function(){e.forEach(n=>{n.disabled=!1,n.classList.remove("btn-light"),n.classList.add("btn-outline-primary")})}}let i=document.getElementById("artifact-editor-modal"),o=document.getElementsByName("artifact-editor-dataeditor");i.addEventListener("shown.bs.modal",()=>{t(o)()}),i.addEventListener("hidden.bs.modal",()=>{r(o)()});let s=document.getElementById("asset-editor-modal"),a=document.getElementsByName("artifact-editor-fileeditor");s.addEventListener("shown.bs.modal",()=>{t(a)()}),s.addEventListener("hidden.bs.modal",()=>{r(a)()});let d=document.getElementById("emulate-editor-modal"),L=document.getElementsByName("artifact-editor-emueditor");d.addEventListener("shown.bs.modal",()=>{t(L)()}),d.addEventListener("hidden.bs.modal",()=>{r(L)()});let E=document.getElementById("emulate-run-program");if(E!==null){let e=document.getElementById("emulate-guess-program");if(e===null)throw new Error("The guess program input is missing.");E.addEventListener("input",()=>{if(E.value=E.value.toUpperCase(),E.value!==""){e.disabled=!0;return}e.disabled=!1})}if(v("artifact-editor-key-value")===null)throw new Error("The key value is missing.");let y=v("artifact-editor-key-label");if(y===null)throw new Error("The key label is missing.");if(y.addEventListener("click",()=>x("artifact-editor-key-value")),v("artifact-editor-unique-id-value")===null)throw new Error("The unique id value is missing.");let X=v("artifact-editor-unique-id-label");if(X===null)throw new Error("The unique id label is missing.");if(X.addEventListener("click",()=>x("artifact-editor-unique-id-value")),v("artifact-editor-location-value")===null)throw new Error("The location value is missing.");let _=v("artifact-editor-location-label");if(_===null)throw new Error("The location label is missing.");_.addEventListener("click",()=>x("artifact-editor-location-value"));let J=v("artifact-editor-templocation");if(J!=null){let e=v("artifact-editor-templocation-label");e!==null&&e.addEventListener("click",()=>x("artifact-editor-templocation"))}if(document.getElementById("artifact-editor-os-label")===null)throw new Error("The operating system label is missing.");let w=document.getElementById("artifact-editor-operating-system");if(w===null)throw new Error("The operating system input is missing.");w.addEventListener("input",D);let p=document.getElementById("artifact-editor-category");if(p===null)throw new Error("The category input is missing.");p.addEventListener("input",Y),D(),Y();function D(){w.selectedIndex==0&&(w.classList.remove("is-valid"),w.classList.add("is-invalid"))}function Y(){p.selectedIndex==0&&(p.classList.remove("is-valid"),p.classList.add("is-invalid"))}let F=document.getElementsByName("prereset-classifications");if(F.length===0)throw new Error("The preset classifications are missing.");for(let e=0;e<F.length;e++)Be(e);function Be(e){let n=F[e],m=n.getAttribute("data-preset-os");if(m===null)throw new Error("data-preset-os attribute is required for ${elm.id}.");let f=n.getAttribute("data-preset-tag");if(f===null)throw new Error("data-preset-tag attribute is required for ${elm.id}.");n.addEventListener("click",T=>{T.preventDefault(),w.value=m,w.classList.remove("is-invalid"),p.value=f,p.classList.remove("is-invalid"),D(),Y()})}let g=document.getElementById("artifact-editor-filename");if(g===null)throw new Error("The filename input is missing.");g.addEventListener("input",e=>{e.target.classList.remove("is-valid"),e.target.classList.remove("is-invalid"),e.target.value.trim().length===0&&e.target.classList.add("is-invalid")});let K=document.getElementById("artifact-editor-filename-reset");if(K===null)throw new Error("The filename reset is missing.");let z=document.getElementsByName("artifact-editor-filename-undo");if(z.length===0)throw new Error("The filename resetter is missing.");K.addEventListener("click",()=>{if(g.classList.remove("is-valid"),z.length===0)throw new Error("The filename resetter is missing.");g.value=z[0].value,g.classList.add("is-valid"),g.classList.remove("is-invalid"),g.value.trim().length===0&&g.classList.add("is-invalid")});let b=document.getElementById("artifact-editor-releaser-1");if(b===null)throw new Error("The releaser 1 input is missing.");b.addEventListener("input",e=>I(e.target));let B=document.getElementById("artifact-editor-releaser-2");if(B===null)throw new Error("The releaser 2 input is missing.");B.addEventListener("input",e=>I(e.target));let Q=document.getElementById("artifact-editor-releaser-undo");if(Q===null)throw new Error("The releasers reset is missing.");Q.addEventListener("click",Te);function Te(){let e=b.getAttribute("data-reset-rel1");if(e===null)throw new Error("data-reset-rel1 attribute is required for artifact-editor-releaser-1.");b.value=e,I(b);let n=B.getAttribute("data-reset-rel2");if(n===null)throw new Error("data-reset-rel2 attribute is required for artifact-editor-releaser-2.");B.value=n,I(B)}let h=document.getElementById("artifact-editor-title");if(h===null)throw new Error("The title input is missing.");h.addEventListener("input",e=>{e.target.classList.remove("is-valid")});let ee=document.getElementById("artifact-editor-title-undo");if(ee===null)throw new Error("The title reset is missing.");let S=document.getElementsByName("artifact-editor-titleundo");if(S.length===0)throw new Error("The title resetter is missing.");ee.addEventListener("click",()=>{if(h.classList.remove("is-valid"),S.length===0)throw new Error("The title resetter is missing.");h.value=S[0].value,h.classList.add("is-valid")});let te=document.getElementById("artifact-editor-titleize");if(te.length===0)throw new Error("The titleize button is missing.");te.addEventListener("click",()=>{h.value=be(h.value);let e=new Event("keyup");h.dispatchEvent(e)});let V=document.getElementById("artifact-editor-credit-text");if(V===null)throw new Error("The creator text input is missing.");V.addEventListener("input",e=>{e.target.classList.remove("is-valid")});let G=document.getElementById("artifact-editor-credit-ill");if(G===null)throw new Error("The creator illustrator input is missing.");G.addEventListener("input",e=>{e.target.classList.remove("is-valid")});let P=document.getElementById("artifact-editor-credit-prog");if(P===null)throw new Error("The creator programmer input is missing.");P.addEventListener("input",e=>{e.target.classList.remove("is-valid")});let j=document.getElementById("artifact-editor-credit-audio");if(j===null)throw new Error("The creator audio input is missing.");j.addEventListener("input",e=>{e.target.classList.remove("is-valid")});let O=document.getElementById("artifact-editor-credits-undo");if(O===null)throw new Error("The creator resetter is missing.");let ie=document.getElementById("artifact-editor-credit-undo");if(ie===null)throw new Error("The creator reset is missing.");ie.addEventListener("click",()=>{if(O.length===0)throw new Error("The creator resetter is missing.");let e=O.value.split(";");if(e.length!=4)throw new Error("The creator resetter values are invalid.");let n=e[0],m=e[1],f=e[2],T=e[3];V.value=n,G.value=m,P.value=f,j.value=T});let re=document.getElementById("artifact-editor-virustotal");if(re===null)throw new Error("The virustotal input is missing.");re.addEventListener("input",e=>{e.target.classList.remove("is-valid","is-invalid");let n=e.target.value.trim();n.length!=0&&(n.startsWith("https://www.virustotal.com/")||e.target.classList.add("is-invalid"))});let l=document.getElementById("artifact-editor-year");if(l===null)throw new Error("The year input is missing.");l.addEventListener("input",()=>{let e=parseInt(l.value,10);e>=79&&e<=99&&(l.value=1900+e),M(l,u,c)});let u=document.getElementById("artifact-editor-month");if(u===null)throw new Error("The month input is missing.");u.addEventListener("input",()=>{M(l,u,c)});let c=document.getElementById("artifact-editor-day");if(c===null)throw new Error("The day input is missing.");c.addEventListener("input",()=>{M(l,u,c)});let ne=document.getElementById("artifact-editor-date-reset");if(ne===null)throw new Error("The date reset is missing.");let se=document.getElementById("artifact-editor-date-resetter");if(se===null)throw new Error("The date resetter is missing.");ne.addEventListener("click",()=>{l.classList.remove("is-invalid","is-valid"),u.classList.remove("is-invalid","is-valid"),c.classList.remove("is-invalid","is-valid");let n=se.value.split("-");if(n.length!=3)throw new Error("The date resetter values are invalid.");l.value=n[0],u.value=n[1],c.value=n[2]});let k=document.getElementById("artifact-editor-comment");if(k===null)throw new Error("The comment input is missing.");k.addEventListener("input",e=>{if(e.target.classList.remove("is-valid"),(l.value==0&&u.value==0&&c.value==0)==!1)return;let f=/(0[1-9]|1[0-2])\/(0[1-9]|[12][0-9]|3[01])\/(\d{2})/.exec(e.target.value);if(f){let T=f[1],ke=f[2],Ne=f[3],C=parseInt(Ne,10);l.value=2e3+C,C>=79&&C<=99&&(l.value=1900+C),u.value=T,c.value=ke;let Ee=document.getElementById("artifact-editor-date-update");Ee!==null&&Ee.click()}});let ae=document.getElementById("artifact-editor-comment-undo");if(ae===null)throw new Error("The comment reset is missing.");let oe=document.getElementById("artifact-editor-comment-resetter");if(oe===null)throw new Error("The comment resetter is missing.");ae.addEventListener("click",()=>{k.classList.remove("is-valid"),k.value=oe.value});let le=document.getElementById("artifact-editor-date-lastmod");if(le!==null){let e=document.getElementById("artifact-editor-date-lastmodder");if(e===null)throw new Error("The date last modder input is missing.");le.addEventListener("click",()=>{l.classList.remove("is-invalid","is-valid"),u.classList.remove("is-invalid","is-valid"),c.classList.remove("is-invalid","is-valid");let m=e.value.split("-");if(m.length!=3)throw new Error("The date last modder values are invalid.");l.value=m[0],u.value=m[1],c.value=m[2]})}let de=document.getElementById("artifact-editor-links-reset");if(de===null)throw new Error("The links reset is missing.");let N=document.getElementById("artifact-editor-youtube"),ue=document.getElementById("artifact-editor-youtube-reset");if(N===null||ue===null)throw new Error("A YouTube input is missing.");let $=document.getElementById("artifact-editor-demozoo"),ce=document.getElementById("artifact-editor-demozoo-reset");if($===null||ce===null)throw new Error("A Demozoo input is missing.");let A=document.getElementById("artifact-editor-pouet"),me=document.getElementById("artifact-editor-pouet-reset");if(A===null||me===null)throw new Error("A Pouet input is missing.");let R=document.getElementById("artifact-editor-16colors"),ve=document.getElementById("artifact-editor-16colors-reset");if(R===null||ve===null)throw new Error("A 16colors input is missing.");let q=document.getElementById("artifact-editor-github"),fe=document.getElementById("artifact-editor-github-reset");if(q===null||fe===null)throw new Error("A GitHub input is missing.");let H=document.getElementById("artifact-editor-relations"),ge=document.getElementById("artifact-editor-relations-reset");if(H===null||ge===null)throw new Error("A relations input is missing.");let W=document.getElementById("artifact-editor-websites"),he=document.getElementById("artifact-editor-websites-reset");if(W===null||he===null)throw new Error("A websites input is missing.");de.addEventListener("click",()=>{N.classList.remove("is-invalid","is-valid"),$.classList.remove("is-invalid","is-valid"),A.classList.remove("is-invalid","is-valid"),R.classList.remove("is-invalid","is-valid"),q.classList.remove("is-invalid","is-valid"),H.classList.remove("is-invalid","is-valid"),W.classList.remove("is-invalid","is-valid"),N.value=ue.value,$.value=ce.value,A.value=me.value,R.value=ve.value,q.value=fe.value,H.value=ge.value,W.value=he.value});let Ie=45e4,xe=2e5;N.addEventListener("input",e=>ye(e.target)),$.addEventListener("input",e=>Z(e.target,Ie)),A.addEventListener("input",e=>Z(e.target,xe)),R.addEventListener("input",e=>pe(e.target)),q.addEventListener("input",e=>we(e.target))})();})();

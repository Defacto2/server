/* editor-artifact.min.js © Defacto2 2024 */
(()=>{function R(e,i,r){if(e==null)throw new Error("The year input element is null.");if(i==null)throw new Error("The month input element is null.");if(r==null)throw new Error("The day input element is null.");e.classList.remove("is-invalid","is-valid"),i.classList.remove("is-invalid","is-valid"),r.classList.remove("is-invalid","is-valid");let o=parseInt(e.value,10);isNaN(o)?e.value="0":e.value=o;let n=parseInt(i.value,10);isNaN(n)?i.value="0":i.value=n;let s=parseInt(r.value,10);isNaN(s)?r.value="0":r.value=s;let l=0,E=new Date().getFullYear(),m=o>=1980&&o<=E;o>l&&!m&&e.classList.add("is-invalid");let V=n>=1&&n<=12;n>l&&!V&&i.classList.add("is-invalid");let y=s>=1&&s<=31;s>l&&!y&&r.classList.add("is-invalid"),isNaN(o)&&(V||y)&&e.classList.add("is-invalid"),(n==l||isNaN(n))&&y&&i.classList.add("is-invalid")}function we(e){return ye(e,!0)}function Le(e){return ye(e,!1)}function ye(e,i){if(e==null)throw new Error("The repository URL element is null.");e.classList.remove("is-valid","is-invalid");let r=e.value.trim();if(r.length===0)return;if(i==!0&&r.startsWith("refs/")){e.classList.add("is-invalid");return}if(r.includes("://")){e.classList.add("is-invalid");return}let n=/[^A-Za-z0-9-._/]/g;r=r.replace(n,""),r=r.replaceAll("//","/");let s=/^\//;r=r.replace(s,""),e.value=r;let l=e.getAttribute("maxlength");if(l===null)throw new Error(`The maxlength attribute is required for ${e.id}.`);if(r.length>l){e.classList.add("is-invalid");return}}function I(e){if(e==null)throw new Error("The element of the releaser validator is null.");e.classList.remove("is-valid","is-invalid");let i=e.value.trimStart().toUpperCase();i=i.replace("+",", "),i=i.replace(/[^ A-ZÀ-ÖØ-Þ0-9\-,&]/g,""),i=i.replace(/[ ]{2,}/g," "),e.value=i;let r=e.getAttribute("minlength"),o=e.getAttribute("maxlength"),n=e.getAttribute("required");if(r===null)throw new Error(`The minlength attribute is required for ${e.id}.`);if(o===null)throw new Error(`The maxlength attribute is required for ${e.id}.`);let s=document.getElementById("artifact-editor-releasers-error");if(s===null)throw new Error("The releasers error element is null.");let l=i.length<r||i.length>o;if(n!=null&&l){e.classList.add("is-invalid"),e.id==="-1"&&s.classList.add("d-block");return}let E=i.length>0&&(i.length<r||i.length>o);if(n==null&&E){e.classList.add("is-invalid");return}e.classList.remove("is-invalid"),s.classList.remove("d-block")}function be(e){if(e==null)throw new Error("The element of the releaser validator is null.");e.classList.remove("is-valid","is-invalid");let i=e.value.trim();i.length>0&&i.length!=11&&e.classList.add("is-invalid")}function H(e,i){if(e==null)throw new Error("The element of the number validator is null.");e.classList.remove("is-valid","is-invalid");let r=parseInt(e.value,10);isNaN(r)&&e.classList.add("is-invalid"),(r>i||r<0)&&e.classList.add("is-invalid")}function Be(e){let i=["a","addon","aka","an","and","as","at","beta","but","by","cd-rip","crack","cracks","demo","docs","documentation","fix","for","if","in","installer","is","of","on","or","so","the","to","final","from","patch","part","prerelease","pre-release","preview","proper","release","repack","rip","trainer","v1","v2","v3","v4","v5","v6","v7","v8","v9","v10","vs","with"],r=["2d","3d","4d","abc","ad&d","bbs","cd","cga","dos","dox","ega","ehq","f1","ftp","hq","id","iso","la","ls","mbl","ms","nascar","nba","ncaa","nfl","nfo","nhl","nt","oem","os","pc","psx","usa","ushq","uss","vga","whq","wwf","xp"];e=e.trim(),e=e.replace(/_/g," "),e=e.replace(/ \([0-9a-z]\)/g,""),e=e.replace(/([a-zA-Z0-9]): /g,"$1 : ");let o=e.split(" ").length;return e=e.split(" ").map((n,s)=>{let l=qe(n);if(s>0&&Number.isInteger(l))return l;let E=Ce(n);if(s>0&&E!==n)return E;let m=$e(n,s,o);return m!==n?m:r.includes(n.toLowerCase())?n.toUpperCase():s===0||!i.includes(n.toLowerCase())?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():n.toLowerCase()}).join(" ").trim(),e}function $e(e,i,r){return i!=r-1?e:["cheat","cheater","cracktro","loader","installer","trainer","version"].includes(e.toLowerCase())?"":e}function qe(e){let i={I:1,V:5,X:10},r=0,o=0;for(let n=e.length-1;n>=0;n--){let s=i[e[n].toUpperCase()];s<o?r-=s:r+=s,o=s}return r==0?e:r}function Ce(e){switch(e){case"cdrip":return"cd-rip";case"&":return"and";case"ad+d":return"AD&D";case"V1.0":return"v1";case"V2.0":return"v2";case"V3.0":return"v3";case"V4.0":return"v4";case"V5.0":return"v5";case"V6.0":return"v6";case"V7.0":return"v7";case"V8.0":return"v8";case"V9.0":return"v9";case"V10.0":return"v10";case"||":return"2";case"]|[":return"3";case"]||[":return"4";case" I:":return" 1 :";case" II:":return" 2 :";case" III:":return" 3 :";case"war-craft":return"Warcraft";default:return e}}async function x(e){let i=h(e);i.focus(),await navigator.clipboard.writeText(`${i.value}`).then(function(){console.log(`Copied ${De(i.value.length)} to the clipboard`)},function(r){console.error(`could not save any text to the clipboard: ${r}`)})}function h(e){let i=document.getElementById(e);if(i==null){console.error(`The ${e} for getElmById() element is null.`);return}return i}function De(e=0){let n=Math.pow(1e3,2),s=Math.pow(1e3,3);return e>s?`${(Math.round(e*100/s)/100).toFixed(2)} GB`:e>n?`${(Math.round(e*100/n)/100).toFixed(1)} MB`:e>1e3?`${(Math.round(e*100/1e3)/100).toFixed()} kB`:`${Math.round(e).toFixed()} bytes`}(()=>{"use strict";function e(t){return function(){t.forEach(a=>{a.disabled=!0,a.classList.remove("btn-outline-primary"),a.classList.add("btn-light")})}}function i(t){return function(){t.forEach(a=>{a.disabled=!1,a.classList.remove("btn-light"),a.classList.add("btn-outline-primary")})}}let r=document.getElementById("artifact-editor-modal"),o=document.getElementsByName("artifact-editor-dataeditor");r.addEventListener("shown.bs.modal",()=>{e(o)()}),r.addEventListener("hidden.bs.modal",()=>{i(o)()});let n=document.getElementById("asset-editor-modal"),s=document.getElementsByName("artifact-editor-fileeditor");n.addEventListener("shown.bs.modal",()=>{e(s)()}),n.addEventListener("hidden.bs.modal",()=>{i(s)()});let l=document.getElementById("emulate-editor-modal"),E=document.getElementsByName("artifact-editor-emueditor");l.addEventListener("shown.bs.modal",()=>{e(E)()}),l.addEventListener("hidden.bs.modal",()=>{i(E)()});let m=document.getElementById("emulate-run-program");if(m!==null){let t=document.getElementById("emulate-guess-program");if(t===null)throw new Error("The guess program input is missing.");m.addEventListener("input",()=>{if(m.value=m.value.toUpperCase(),m.value!==""){t.disabled=!0;return}t.disabled=!1})}if(h("artifact-editor-key-value")===null)throw new Error("The key value is missing.");let y=h("artifact-editor-key-label");if(y===null)throw new Error("The key label is missing.");if(y.addEventListener("click",()=>x("artifact-editor-key-value")),h("artifact-editor-unique-id-value")===null)throw new Error("The unique id value is missing.");let _=h("artifact-editor-unique-id-label");if(_===null)throw new Error("The unique id label is missing.");if(_.addEventListener("click",()=>x("artifact-editor-unique-id-value")),h("artifact-editor-location-value")===null)throw new Error("The location value is missing.");let X=h("artifact-editor-location-label");if(X===null)throw new Error("The location label is missing.");X.addEventListener("click",()=>x("artifact-editor-location-value"));let J=h("artifact-editor-templocation");if(J!=null){let t=h("artifact-editor-templocation-label");t!==null&&t.addEventListener("click",()=>x("artifact-editor-templocation"))}if(document.getElementById("artifact-editor-os-label")===null)throw new Error("The operating system label is missing.");let w=document.getElementById("artifact-editor-operating-system");if(w===null)throw new Error("The operating system input is missing.");w.addEventListener("input",U);let L=document.getElementById("artifact-editor-category");if(L===null)throw new Error("The category input is missing.");L.addEventListener("input",M),U(),M();function U(){w.selectedIndex==0&&(w.classList.remove("is-valid"),w.classList.add("is-invalid"))}function M(){L.selectedIndex==0&&(L.classList.remove("is-valid"),L.classList.add("is-invalid"))}let z=document.getElementsByName("prereset-classifications");if(z.length===0)throw new Error("The preset classifications are missing.");for(let t=0;t<z.length;t++)Te(t);function Te(t){let a=z[t],g=a.getAttribute("data-preset-os");if(g===null)throw new Error("data-preset-os attribute is required for ${elm.id}.");let v=a.getAttribute("data-preset-tag");if(v===null)throw new Error("data-preset-tag attribute is required for ${elm.id}.");a.addEventListener("click",b=>{b.preventDefault(),w.value=g,w.classList.remove("is-invalid"),L.value=v,L.classList.remove("is-invalid"),U(),M()})}let p=document.getElementById("artifact-editor-filename");if(p===null)throw new Error("The filename input is missing.");p.addEventListener("input",t=>{t.target.classList.remove("is-valid"),t.target.classList.remove("is-invalid"),t.target.value.trim().length===0&&t.target.classList.add("is-invalid")});let K=document.getElementById("artifact-editor-filename-reset");if(K===null)throw new Error("The filename reset is missing.");let F=document.getElementsByName("artifact-editor-filename-undo");if(F.length===0)throw new Error("The filename resetter is missing.");K.addEventListener("click",()=>{if(p.classList.remove("is-valid"),F.length===0)throw new Error("The filename resetter is missing.");p.value=F[0].value,p.classList.add("is-valid"),p.classList.remove("is-invalid"),p.value.trim().length===0&&p.classList.add("is-invalid")});let B=document.getElementById("artifact-editor-releaser-1");if(B===null)throw new Error("The releaser 1 input is missing.");B.addEventListener("input",t=>I(t.target));let T=document.getElementById("artifact-editor-releaser-2");if(T===null)throw new Error("The releaser 2 input is missing.");T.addEventListener("input",t=>I(t.target));let Q=document.getElementById("artifact-editor-releaser-undo");if(Q===null)throw new Error("The releasers reset is missing.");Q.addEventListener("click",Ie);function Ie(){let t=B.getAttribute("data-reset-rel1");if(t===null)throw new Error("data-reset-rel1 attribute is required for artifact-editor-releaser-1.");B.value=t,I(B);let a=T.getAttribute("data-reset-rel2");if(a===null)throw new Error("data-reset-rel2 attribute is required for artifact-editor-releaser-2.");T.value=a,I(T)}let f=document.getElementById("artifact-editor-title");if(f===null)throw new Error("The title input is missing.");f.addEventListener("input",t=>{t.target.classList.remove("is-valid")});let ee=document.getElementById("artifact-editor-title-undo");if(ee===null)throw new Error("The title reset is missing.");let Y=document.getElementsByName("artifact-editor-titleundo");if(Y.length===0)throw new Error("The title resetter is missing.");ee.addEventListener("click",()=>{if(f.classList.remove("is-valid"),Y.length===0)throw new Error("The title resetter is missing.");f.value=Y[0].value,f.classList.add("is-valid")});let te=document.getElementById("artifact-editor-titleize");if(te.length===0)throw new Error("The titleize button is missing.");te.addEventListener("click",()=>{f.value=Be(f.value);let t=new Event("keyup");f.dispatchEvent(t)});let ie=document.getElementById("artifact-editor-title-delete");if(ie.length===0)throw new Error("The title delete button is missing.");ie.addEventListener("click",()=>{f.value="";let t=new Event("keyup");f.dispatchEvent(t)});let S=document.getElementById("artifact-editor-credit-text");if(S===null)throw new Error("The creator text input is missing.");S.addEventListener("input",t=>{t.target.classList.remove("is-valid")});let P=document.getElementById("artifact-editor-credit-ill");if(P===null)throw new Error("The creator illustrator input is missing.");P.addEventListener("input",t=>{t.target.classList.remove("is-valid")});let G=document.getElementById("artifact-editor-credit-prog");if(G===null)throw new Error("The creator programmer input is missing.");G.addEventListener("input",t=>{t.target.classList.remove("is-valid")});let j=document.getElementById("artifact-editor-credit-audio");if(j===null)throw new Error("The creator audio input is missing.");j.addEventListener("input",t=>{t.target.classList.remove("is-valid")});let O=document.getElementById("artifact-editor-credits-undo");if(O===null)throw new Error("The creator resetter is missing.");let re=document.getElementById("artifact-editor-credit-undo");if(re===null)throw new Error("The creator reset is missing.");re.addEventListener("click",()=>{if(O.length===0)throw new Error("The creator resetter is missing.");let t=O.value.split(";");if(t.length!=4)throw new Error("The creator resetter values are invalid.");let a=t[0],g=t[1],v=t[2],b=t[3];S.value=a,P.value=g,G.value=v,j.value=b});let ne=document.getElementById("artifact-editor-virustotal");if(ne===null)throw new Error("The virustotal input is missing.");ne.addEventListener("input",t=>{t.target.classList.remove("is-valid","is-invalid");let a=t.target.value.trim();a.length!=0&&(a.startsWith("https://www.virustotal.com/")||t.target.classList.add("is-invalid"))});let d=document.getElementById("artifact-editor-year");if(d===null)throw new Error("The year input is missing.");d.addEventListener("input",()=>{let t=parseInt(d.value,10);t>=79&&t<=99&&(d.value=1900+t),R(d,c,u)});let c=document.getElementById("artifact-editor-month");if(c===null)throw new Error("The month input is missing.");c.addEventListener("input",()=>{R(d,c,u)});let u=document.getElementById("artifact-editor-day");if(u===null)throw new Error("The day input is missing.");u.addEventListener("input",()=>{R(d,c,u)});let se=document.getElementById("artifact-editor-date-reset");if(se===null)throw new Error("The date reset is missing.");let ae=document.getElementById("artifact-editor-date-resetter");if(ae===null)throw new Error("The date resetter is missing.");se.addEventListener("click",()=>{d.classList.remove("is-invalid","is-valid"),c.classList.remove("is-invalid","is-valid"),u.classList.remove("is-invalid","is-valid");let a=ae.value.split("-");if(a.length!=3)throw new Error("The date resetter values are invalid.");d.value=a[0],c.value=a[1],u.value=a[2]});let k=document.getElementById("artifact-editor-comment");if(k===null)throw new Error("The comment input is missing.");k.addEventListener("input",t=>{if(t.target.classList.remove("is-valid"),(d.value==0&&c.value==0&&u.value==0)==!1)return;let v=/(0[1-9]|1[0-2])\/(0[1-9]|[12][0-9]|3[01])\/(\d{2})/.exec(t.target.value);if(v||(v=/(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])-(\d{2})/.exec(t.target.value)),v){let b=v[1],Ne=v[2],Ae=v[3],D=parseInt(Ae,10);d.value=2e3+D,D>=79&&D<=99&&(d.value=1900+D),c.value=b,u.value=Ne;let pe=document.getElementById("artifact-editor-date-update");pe!==null&&pe.click()}});let oe=document.getElementById("artifact-editor-comment-undo");if(oe===null)throw new Error("The comment reset is missing.");let le=document.getElementById("artifact-editor-comment-resetter");if(le===null)throw new Error("The comment resetter is missing.");oe.addEventListener("click",()=>{k.classList.remove("is-valid"),k.value=le.value});let de=document.getElementById("artifact-editor-date-lastmod");if(de!==null){let t=document.getElementById("artifact-editor-date-lastmodder");if(t===null)throw new Error("The date last modder input is missing.");de.addEventListener("click",()=>{d.classList.remove("is-invalid","is-valid"),c.classList.remove("is-invalid","is-valid"),u.classList.remove("is-invalid","is-valid");let g=t.value.split("-");if(g.length!=3)throw new Error("The date last modder values are invalid.");d.value=g[0],c.value=g[1],u.value=g[2]})}let ce=document.getElementById("artifact-editor-links-reset");if(ce===null)throw new Error("The links reset is missing.");let N=document.getElementById("artifact-editor-youtube"),ue=document.getElementById("artifact-editor-youtube-reset");if(N===null||ue===null)throw new Error("A YouTube input is missing.");let A=document.getElementById("artifact-editor-demozoo"),ve=document.getElementById("artifact-editor-demozoo-reset");if(A===null||ve===null)throw new Error("A Demozoo input is missing.");let $=document.getElementById("artifact-editor-pouet"),me=document.getElementById("artifact-editor-pouet-reset");if($===null||me===null)throw new Error("A Pouet input is missing.");let q=document.getElementById("artifact-editor-16colors"),fe=document.getElementById("artifact-editor-16colors-reset");if(q===null||fe===null)throw new Error("A 16colors input is missing.");let C=document.getElementById("artifact-editor-github"),ge=document.getElementById("artifact-editor-github-reset");if(C===null||ge===null)throw new Error("A GitHub input is missing.");let W=document.getElementById("artifact-editor-relations"),he=document.getElementById("artifact-editor-relations-reset");if(W===null||he===null)throw new Error("A relations input is missing.");let Z=document.getElementById("artifact-editor-websites"),Ee=document.getElementById("artifact-editor-websites-reset");if(Z===null||Ee===null)throw new Error("A websites input is missing.");ce.addEventListener("click",()=>{N.classList.remove("is-invalid","is-valid"),A.classList.remove("is-invalid","is-valid"),$.classList.remove("is-invalid","is-valid"),q.classList.remove("is-invalid","is-valid"),C.classList.remove("is-invalid","is-valid"),W.classList.remove("is-invalid","is-valid"),Z.classList.remove("is-invalid","is-valid"),N.value=ue.value,A.value=ve.value,$.value=me.value,q.value=fe.value,C.value=ge.value,W.value=he.value,Z.value=Ee.value});let xe=45e4,ke=2e5;N.addEventListener("input",t=>be(t.target)),A.addEventListener("input",t=>H(t.target,xe)),$.addEventListener("input",t=>H(t.target,ke)),q.addEventListener("input",t=>Le(t.target)),C.addEventListener("input",t=>we(t.target))})();})();

/* artifact-editor.min.js © Defacto2 2024 */
(()=>{"use strict";const N=document.getElementsByName("reset-classifications"),C=document.getElementById("artifact-editor-os-label"),d=document.getElementById("artifact-editor-operating-system"),c=document.getElementById("artifact-editor-category"),p="artifact-editor-filename",o=document.getElementById(p),D=document.getElementById(p+"-reset"),R=document.getElementsByName(p+"-resetter"),I="artifact-editor-releaser",m=document.getElementById(I+"-1"),g=document.getElementById(I+"-2"),M=document.getElementById(I+"-reset"),h="artifact-editor-title",f=document.getElementById(h),Y=document.getElementById(h+"-reset"),x=document.getElementsByName(h+"-resetter"),T=document.getElementById("artifact-editor-credit-text");T.addEventListener("input",e=>{e.target.classList.remove("is-valid")});const k=document.getElementById("artifact-editor-credit-ill");k.addEventListener("input",e=>{e.target.classList.remove("is-valid")});const q=document.getElementById("artifact-editor-credit-prog");q.addEventListener("input",e=>{e.target.classList.remove("is-valid")});const A=document.getElementById("artifact-editor-credit-audio");A.addEventListener("input",e=>{e.target.classList.remove("is-valid")});const $=document.getElementById("artifact-editor-credit-resetter");document.getElementById("artifact-editor-credit-reset").addEventListener("click",()=>{if(console.log("resetting credits"),$.length===0)throw new Error("The creator resetter is missing.");const e=$.value.split(";");if(e.length!=4)throw new Error("The creator resetter values are invalid.");const t=e[0],i=e[1],s=e[2],l=e[3];T.value=t,k.value=i,q.value=s,A.value=l});const y=document.getElementById("artifact-editor-comment");y.addEventListener("input",e=>{e.target.classList.remove("is-valid")});const O=document.getElementById("artifact-editor-comment-reset"),F=document.getElementById("artifact-editor-comment-resetter");O.addEventListener("click",()=>{y.classList.remove("is-valid"),y.value=F.value}),document.getElementById("artifact-editor-virustotal").addEventListener("input",e=>{e.target.classList.remove("is-valid","is-invalid");const t=e.target.value.trim();t.length!=0&&(t.startsWith("https://www.virustotal.com/")||e.target.classList.add("is-invalid"))});const a=document.getElementById("artifact-editor-year"),r=document.getElementById("artifact-editor-month"),n=document.getElementById("artifact-editor-day");a.addEventListener("input",B),r.addEventListener("input",B),n.addEventListener("input",B);const P=document.getElementById("artifact-editor-date-reset"),S=document.getElementById("artifact-editor-date-resetter"),U=document.getElementById("artifact-editor-date-lastmod"),W=document.getElementById("artifact-editor-date-lastmodder");P.addEventListener("click",()=>{a.classList.remove("is-invalid","is-valid"),r.classList.remove("is-invalid","is-valid"),n.classList.remove("is-invalid","is-valid");const t=S.value.split("-");if(t.length!=3)throw new Error("The date resetter values are invalid.");a.value=t[0],r.value=t[1],n.value=t[2]}),U.addEventListener("click",()=>{a.classList.remove("is-invalid","is-valid"),r.classList.remove("is-invalid","is-valid"),n.classList.remove("is-invalid","is-valid");const t=W.value.split("-");if(t.length!=3)throw new Error("The date last modder values are invalid.");a.value=t[0],r.value=t[1],n.value=t[2]});function B(){a.classList.remove("is-invalid","is-valid"),r.classList.remove("is-invalid","is-valid"),n.classList.remove("is-invalid","is-valid");const e=parseInt(a.value,10);isNaN(e)?a.value="0":a.value=e;const t=parseInt(r.value,10);isNaN(t)?r.value="0":r.value=t;const i=parseInt(n.value,10);isNaN(i)?n.value="0":n.value=i;const s=0,l=new Date().getFullYear(),u=e>=1980&&e<=l;e>s&&!u&&a.classList.add("is-invalid");const E=t>=1&&t<=12;t>s&&!E&&r.classList.add("is-invalid");const v=i>=1&&i<=31;i>s&&!v&&n.classList.add("is-invalid"),isNaN(e)&&(E||v)&&a.classList.add("is-invalid"),(t==s||isNaN(t))&&v&&r.classList.add("is-invalid")}w(),b();for(let e=0;e<N.length;e++)Z(e);d.addEventListener("input",w),c.addEventListener("input",b),m.addEventListener("input",e=>L(e.target)),g.addEventListener("input",e=>L(e.target)),M.addEventListener("click",j),f.addEventListener("input",e=>{e.target.classList.remove("is-valid")}),Y.addEventListener("click",()=>{if(f.classList.remove("is-valid"),x.length===0)throw new Error("The title resetter is missing.");f.value=x[0].value,f.classList.add("is-valid")}),o.addEventListener("input",e=>{e.target.classList.remove("is-valid"),e.target.classList.remove("is-invalid"),e.target.value.trim().length===0&&e.target.classList.add("is-invalid")}),D.addEventListener("click",()=>{if(o.classList.remove("is-valid"),R.length===0)throw new Error("The filename resetter is missing.");o.value=R[0].value,o.classList.add("is-valid"),o.classList.remove("is-invalid"),o.value.trim().length===0&&o.classList.add("is-invalid")});function Z(e){const t=N[e],i=t.getAttribute("data-reset-os");if(i===null)throw new Error("data-reset-os attribute is required for ${elm.id}.");const s=t.getAttribute("data-reset-cat");if(s===null)throw new Error("data-reset-cat attribute is required for ${elm.id}.");t.addEventListener("click",l=>{l.preventDefault(),d.value=i,d.classList.remove("is-invalid"),c.value=s,c.classList.remove("is-invalid"),w(),b()})}function j(){const e=m.getAttribute("data-reset-rel1"),t=g.getAttribute("data-reset-rel2");if(e===null)throw new Error("data-reset-rel1 attribute is required for rel1Input.");if(t===null)throw new Error("data-reset-rel2 attribute is required for rel2Input.");m.value=e,L(m),g.value=t,L(g)}function L(e){if(e==null)throw new Error("The element of the releaser validator is null.");e.classList.remove("is-valid","is-invalid");let t=e.value.trim().toUpperCase();t=t.replace(/[^A-ZÀ-ÖØ-Þ0-9\-,& ]/g,""),e.value=t;const i=e.getAttribute("minlength"),s=e.getAttribute("maxlength"),l=e.getAttribute("required");if(i===null)throw new Error(`The minlength attribute is required for ${e.id}.`);if(s===null)throw new Error(`The maxlength attribute is required for ${e.id}.`);const u=document.getElementById("artifact-editor-releasers-error");if(u===null)throw new Error("The releasers error element is null.");const E=t.length<i||t.length>s;if(l!=null&&E){e.classList.add("is-invalid"),e.id==="-1"&&u.classList.add("d-block");return}const v=t.length>0&&(t.length<i||t.length>s);if(l==null&&v){e.classList.add("is-invalid");return}e.classList.remove("is-invalid"),u.classList.remove("d-block")}function w(){const e=d.selectedIndex;let i=d.options[e].parentNode.label;(typeof i>"u"||i=="")&&(d.classList.add("is-invalid"),d.classList.remove("is-valid"),i="Operating system"),C.textContent=`${i}`}function b(){c.selectedIndex==0&&(c.classList.remove("is-valid"),c.classList.add("is-invalid"))}})();

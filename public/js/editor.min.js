/* editor.min.js */
(()=>{"use strict";const f="text-danger",e="is-invalid",y=document.getElementById("recordOnline");if(y==null){console.info("the editor modal is not open so this script is not needed");return}const h=document.getElementById("recordOnlineLabel");y.checked!=!0&&h.classList.add(f),y.addEventListener("change",function(n){y.checked==!0?h.classList.remove(f):h.classList.add(f)});const l=document.getElementById("recordReleasers"),b=document.getElementById("recordReleasersMax");l.addEventListener("input",function(n){if(l.value=l.value.toUpperCase(),l.value=l.value.replace(/[^a-zA-Z0-9-+& ]/g,""),l.value==""){l.classList.add(e);return}l.classList.remove(e),l.value.split("+").length>2?(l.classList.add(e),b.classList.add(f)):(l.classList.remove(e),b.classList.remove(f))});const o=document.getElementById("recordYear"),s=document.getElementById("recordMonth"),r=document.getElementById("recordDay");o.addEventListener("input",function(n){if(o.value>=1980&&o.value<=2023){o.classList.remove(e);return}if(o.value==""&&s.value==""&&r.value==""){o.classList.remove(e),s.classList.remove(e),r.classList.remove(e);return}o.classList.add(e)}),s.addEventListener("input",function(n){if(s.value>=1&&s.value<=12){s.classList.remove(e);return}if(o.value==""&&s.value==""&&r.value==""){o.classList.remove(e),s.classList.remove(e),r.classList.remove(e);return}if(s.value==""&&r.value==""){s.classList.remove(e),r.classList.remove(e);return}s.classList.add(e)}),r.addEventListener("input",function(n){if(s.value>=1&&s.value<=31){s.classList.remove(e);return}if(o.value==""&&s.value==""&&r.value==""){o.classList.remove(e),s.classList.remove(e),r.classList.remove(e);return}if(s.value==""&&r.value==""){s.classList.remove(e),r.classList.remove(e);return}if(r.value==""){r.classList.remove(e);return}r.classList.add(e)});const w=document.getElementById("recordLMBtn"),j=document.getElementById("recordLastMod");typeof w<"u"&&w!==null&&w.addEventListener("click",function(n){const t=j.value.split("-");t.length==3&&(o.value=t[0],s.value=t[1],r.value=t[2])});function B(n){let t=n;return t=t.toLowerCase(),t=t.replace(/[^A-Za-z0-9À-ÖØ-öø-ÿ\s,]/g,""),t}const x=document.getElementById("recordArtist"),T=document.getElementById("recordCoder"),k=document.getElementById("recordMusic"),R=document.getElementById("recordWriter");x.addEventListener("input",function(n){x.value=B(x.value)}),T.addEventListener("input",function(n){T.value=B(T.value)}),k.addEventListener("input",function(n){k.value=B(k.value)}),R.addEventListener("input",function(n){R.value=B(R.value)});const a=document.getElementById("recordDemozoo");a.addEventListener("paste",function(n){setTimeout(()=>{try{if(new URL(`${a.value}`).hostname!="demozoo.org"){a.classList.add(e);return}}catch{return}try{const g=new URL(`${a.value}`).pathname.split("/").filter(Boolean);if(g.length!=2){a.classList.add(e);return}switch(g[0]){case"productions":a.value=g[1];break;case"graphics":a.value=g[1];break;default:a.classList.add(e);return}a.classList.remove(e)}catch{a.classList.add(e)}},0)}),a.addEventListener("input",function(n){let t=Number(a.value);if(isNaN(t)){a.classList.add(e);return}if(t<0||t>999999){a.classList.add(e);return}t==0&&(a.value=""),a.classList.remove(e)});const c=document.getElementById("recordPouet");c.addEventListener("paste",function(n){setTimeout(()=>{try{const t=new URL(`${c.value}`);if(console.log(t.hostname),t.hostname!="www.pouet.net"){c.classList.add(e);return}}catch{return}try{const t=new URL(`${c.value}`);if(t.pathname!="/prod.php"){c.classList.add(e);return}const U=new URLSearchParams(t.search).get("which");c.value=U,c.classList.remove(e)}catch{c.classList.add(e)}},0)}),c.addEventListener("input",function(n){let t=Number(c.value);if(isNaN(t)){c.classList.add(e);return}if(t<0||t>199999){c.classList.add(e);return}t==0&&(c.value=""),c.classList.remove(e)});const E=document.getElementById("record16colors");E.addEventListener("paste",function(n){setTimeout(()=>{try{const t=new URL(`${E.value}`);if(t.hostname!="16colo.rs"){E.classList.add(e);return}const L=t.pathname;E.value=L,E.classList.remove(e)}catch{}},0)}),E.addEventListener("input",function(n){if(E.value==""){E.classList.remove(e);return}});const d=document.getElementById("recordGitHub");d.addEventListener("paste",function(n){setTimeout(()=>{try{const t=new URL(`${d.value}`);if(t.hostname!="github.com"){d.classList.add(e);return}const L=t.pathname;d.value=L,d.classList.remove(e)}catch{}},0)}),d.addEventListener("input",function(n){if(d.value==""){d.classList.remove(e);return}});const u=document.getElementById("recordYouTube");u.addEventListener("paste",function(n){setTimeout(()=>{try{const t=new URL(`${u.value}`);if(t.hostname!="youtube.com"&&t.hostname!="www.youtube.com"){u.classList.add(e);return}const g=new URLSearchParams(t.search).get("v");u.value=g,d.classList.remove(e)}catch{}},0)}),u.addEventListener("input",function(n){setTimeout(()=>{if(u.value==""){u.classList.remove(e);return}if(new RegExp("^[a-zA-Z0-9_-]{11}$").test(u.value)){u.classList.remove(e);return}u.classList.add(e)},0)});const p=document.getElementById("recordFilename");p.addEventListener("input",function(){if(p.value=p.value.trimStart(),p.value==""){p.classList.add(e);return}p.classList.remove(e)});const v=document.getElementById("recordPlatform"),i=document.getElementById("recordTag"),z=document.getElementById("recordReleasersLabel"),O=document.getElementById("recordTitleLabel");i.addEventListener("change",function(n){setTimeout(()=>{if(i.value=="magazine"){I();return}m()},0)});function I(){z.textContent="Magazine",O.textContent="Issue"}function m(){z.textContent="Releasers",O.textContent="Title"}document.getElementById("recordDosText").addEventListener("click",function(n){v.value="text",i.value="",m()}),document.getElementById("recordAmigaText").addEventListener("click",function(n){v.value="textamiga",i.value="",m()}),document.getElementById("recordProof").addEventListener("click",function(n){v.value="image",i.value="releaseproof",m()}),document.getElementById("recordDostro").addEventListener("click",function(n){v.value="dos",i.value="releaseadvert",m()}),document.getElementById("recordWintro").addEventListener("click",function(n){v.value="windows",i.value="releaseadvert",m()}),document.getElementById("recordBBStro").addEventListener("click",function(n){v.value="dos",i.value="bbs",m()}),document.getElementById("recordBBSAnsi").addEventListener("click",function(n){v.value="ansi",i.value="bbs",m()}),document.getElementById("recordTextMag").addEventListener("click",function(n){v.value="text",i.value="magazine",I()}),document.getElementById("recordDosMag").addEventListener("click",function(n){v.value="dos",i.value="magazine",I()}),document.getElementById("recordReset").addEventListener("click",function(n){setTimeout(()=>{y.checked!=!0?h.classList.add(f):h.classList.remove(f),b.classList.remove(f),i.value=="magazine"?I():m(),document.querySelectorAll("input").forEach(L=>{L.classList.remove(e)},0)})})})();

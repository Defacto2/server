/* editor.min.js */
(()=>{"use strict";const S="Are you sure you want to replace ",M="yes",l="text-danger",e="is-invalid",I="is-valid",h=document.getElementById("recordOnline");if(h==null){console.info("the editor modal is not open so this script is not needed");return}const B=document.getElementById("recordOnlineLabel");h.checked!=!0&&B.classList.add(l),h.addEventListener("change",function(n){h.checked==!0?B.classList.remove(l):B.classList.add(l)});const o=document.getElementById("recordArtifact"),D=document.getElementById("recordArtifactBtn"),P=document.getElementById("recordArtifactReset");o.addEventListener("change",function(n){o.value!=""&&o.classList.remove(e)}),D.addEventListener("click",function(n){if(o.value==""){o.classList.add(e),o.classList.remove(I);return}o.classList.remove(e),o.classList.remove(I),window.prompt(S+o.value+`?
Type "`+M+'" to confirm.').toLowerCase()==M&&o.classList.add(I)}),P.addEventListener("click",function(n){o.value="",o.classList.remove(e),o.classList.remove(I)});const k=document.getElementById("recordHideReadme"),R=document.getElementById("recordHideReadmeLabel"),T=document.getElementById("recordReadme");k.checked==!0&&(R.classList.add(l),T.disabled=!0),k.addEventListener("change",function(n){k.checked==!0?(R.classList.add(l),T.disabled=!0):(R.classList.remove(l),T.disabled=!1)});const u=document.getElementById("recordReleasers"),x=document.getElementById("recordReleasersMax");u.addEventListener("input",function(n){if(u.value=u.value.toUpperCase(),u.value=u.value.replace(/[^a-zA-Z0-9-+& ]/g,""),u.value==""){u.classList.add(e);return}u.classList.remove(e),u.value.split("+").length>2?(u.classList.add(e),x.classList.add(l)):(u.classList.remove(e),x.classList.remove(l))});const i=document.getElementById("recordYear"),s=document.getElementById("recordMonth"),r=document.getElementById("recordDay");i.addEventListener("input",function(n){if(i.value>=1980&&i.value<=2023){i.classList.remove(e);return}if(i.value==""&&s.value==""&&r.value==""){i.classList.remove(e),s.classList.remove(e),r.classList.remove(e);return}i.classList.add(e)}),s.addEventListener("input",function(n){if(s.value>=1&&s.value<=12){s.classList.remove(e);return}if(i.value==""&&s.value==""&&r.value==""){i.classList.remove(e),s.classList.remove(e),r.classList.remove(e);return}if(s.value==""&&r.value==""){s.classList.remove(e),r.classList.remove(e);return}s.classList.add(e)}),r.addEventListener("input",function(n){if(s.value>=1&&s.value<=31){s.classList.remove(e);return}if(i.value==""&&s.value==""&&r.value==""){i.classList.remove(e),s.classList.remove(e),r.classList.remove(e);return}if(s.value==""&&r.value==""){s.classList.remove(e),r.classList.remove(e);return}if(r.value==""){r.classList.remove(e);return}r.classList.add(e)});const z=document.getElementById("recordLMBtn"),H=document.getElementById("recordLastMod");typeof z<"u"&&z!==null&&z.addEventListener("click",function(n){const t=H.value.split("-");t.length==3&&(i.value=t[0],s.value=t[1],r.value=t[2])});function b(n){let t=n;return t=t.toLowerCase(),t=t.replace(/[^A-Za-z0-9À-ÖØ-öø-ÿ\s,]/g,""),t}const A=document.getElementById("recordArtist"),O=document.getElementById("recordCoder"),U=document.getElementById("recordMusic"),j=document.getElementById("recordWriter");A.addEventListener("input",function(n){A.value=b(A.value)}),O.addEventListener("input",function(n){O.value=b(O.value)}),U.addEventListener("input",function(n){U.value=b(U.value)}),j.addEventListener("input",function(n){j.value=b(j.value)});const a=document.getElementById("recordDemozoo");a.addEventListener("paste",function(n){setTimeout(()=>{try{if(new URL(`${a.value}`).hostname!="demozoo.org"){a.classList.add(e);return}}catch{return}try{const p=new URL(`${a.value}`).pathname.split("/").filter(Boolean);if(p.length!=2){a.classList.add(e);return}switch(p[0]){case"productions":a.value=p[1];break;case"graphics":a.value=p[1];break;default:a.classList.add(e);return}a.classList.remove(e)}catch{a.classList.add(e)}},0)}),a.addEventListener("input",function(n){let t=Number(a.value);if(isNaN(t)){a.classList.add(e);return}if(t<0||t>999999){a.classList.add(e);return}t==0&&(a.value=""),a.classList.remove(e)});const c=document.getElementById("recordPouet");c.addEventListener("paste",function(n){setTimeout(()=>{try{const t=new URL(`${c.value}`);if(console.log(t.hostname),t.hostname!="www.pouet.net"){c.classList.add(e);return}}catch{return}try{const t=new URL(`${c.value}`);if(t.pathname!="/prod.php"){c.classList.add(e);return}const $=new URLSearchParams(t.search).get("which");c.value=$,c.classList.remove(e)}catch{c.classList.add(e)}},0)}),c.addEventListener("input",function(n){let t=Number(c.value);if(isNaN(t)){c.classList.add(e);return}if(t<0||t>199999){c.classList.add(e);return}t==0&&(c.value=""),c.classList.remove(e)});const g=document.getElementById("record16colors");g.addEventListener("paste",function(n){setTimeout(()=>{try{const t=new URL(`${g.value}`);if(t.hostname!="16colo.rs"){g.classList.add(e);return}const E=t.pathname;g.value=E,g.classList.remove(e)}catch{}},0)}),g.addEventListener("input",function(n){if(g.value==""){g.classList.remove(e);return}});const m=document.getElementById("recordGitHub");m.addEventListener("paste",function(n){setTimeout(()=>{try{const t=new URL(`${m.value}`);if(t.hostname!="github.com"){m.classList.add(e);return}const E=t.pathname;m.value=E,m.classList.remove(e)}catch{}},0)}),m.addEventListener("input",function(n){if(m.value==""){m.classList.remove(e);return}});const v=document.getElementById("recordYouTube");v.addEventListener("paste",function(n){setTimeout(()=>{try{const t=new URL(`${v.value}`);if(t.hostname!="youtube.com"&&t.hostname!="www.youtube.com"){v.classList.add(e);return}const p=new URLSearchParams(t.search).get("v");v.value=p,m.classList.remove(e)}catch{}},0)}),v.addEventListener("input",function(n){setTimeout(()=>{if(v.value==""){v.classList.remove(e);return}if(new RegExp("^[a-zA-Z0-9_-]{11}$").test(v.value)){v.classList.remove(e);return}v.classList.add(e)},0)});const y=document.getElementById("recordFilename");y.addEventListener("input",function(){if(y.value=y.value.trimStart(),y.value==""){y.classList.add(e);return}y.classList.remove(e)});const L=document.getElementById("recordPlatform"),d=document.getElementById("recordTag"),C=document.getElementById("recordReleasersLabel"),N=document.getElementById("recordTitleLabel");d.addEventListener("change",function(n){setTimeout(()=>{if(d.value=="magazine"){w();return}f()},0)});function w(){C.textContent="Magazine",N.textContent="Issue"}function f(){C.textContent="Releasers",N.textContent="Title"}document.getElementById("recordDosText").addEventListener("click",function(n){L.value="text",d.value="",f()}),document.getElementById("recordAmigaText").addEventListener("click",function(n){L.value="textamiga",d.value="",f()}),document.getElementById("recordProof").addEventListener("click",function(n){L.value="image",d.value="releaseproof",f()}),document.getElementById("recordDostro").addEventListener("click",function(n){L.value="dos",d.value="releaseadvert",f()}),document.getElementById("recordWintro").addEventListener("click",function(n){L.value="windows",d.value="releaseadvert",f()}),document.getElementById("recordBBStro").addEventListener("click",function(n){L.value="dos",d.value="bbs",f()}),document.getElementById("recordBBSAnsi").addEventListener("click",function(n){L.value="ansi",d.value="bbs",f()}),document.getElementById("recordTextMag").addEventListener("click",function(n){L.value="text",d.value="magazine",w()}),document.getElementById("recordDosMag").addEventListener("click",function(n){L.value="dos",d.value="magazine",w()}),document.getElementById("recordReset").addEventListener("click",function(n){setTimeout(()=>{h.checked!=!0?B.classList.add(l):B.classList.remove(l),x.classList.remove(l),d.value=="magazine"?w():f(),document.querySelectorAll("input").forEach(E=>{E.classList.remove(e)},0)})})})();

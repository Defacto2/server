/* editor.min.js */
(()=>{"use strict";if(document.getElementById("recordID")==null){console.info("the editor modal is not open so this script is not needed");return}const i=document.getElementById("recordReleasers"),y=document.getElementById("recordReleasersMax");i.addEventListener("input",function(t){if(i.value=i.value.toUpperCase(),i.value=i.value.replace(/[^a-zA-Z0-9-+& ]/g,""),i.value==""){i.classList.add(err);return}i.classList.remove(err),i.value.split("+").length>2?(i.classList.add(err),y.classList.add(dang)):(i.classList.remove(err),y.classList.remove(dang))});const o=document.getElementById("recordYear"),r=document.getElementById("recordMonth"),s=document.getElementById("recordDay");o.addEventListener("input",function(t){if(o.value>=1980&&o.value<=2023){o.classList.remove(err);return}if(o.value==""&&r.value==""&&s.value==""){o.classList.remove(err),r.classList.remove(err),s.classList.remove(err);return}o.classList.add(err)}),r.addEventListener("input",function(t){if(r.value>=1&&r.value<=12){r.classList.remove(err);return}if(o.value==""&&r.value==""&&s.value==""){o.classList.remove(err),r.classList.remove(err),s.classList.remove(err);return}if(r.value==""&&s.value==""){r.classList.remove(err),s.classList.remove(err);return}r.classList.add(err)}),s.addEventListener("input",function(t){if(r.value>=1&&r.value<=31){r.classList.remove(err);return}if(o.value==""&&r.value==""&&s.value==""){o.classList.remove(err),r.classList.remove(err),s.classList.remove(err);return}if(r.value==""&&s.value==""){r.classList.remove(err),s.classList.remove(err);return}if(s.value==""){s.classList.remove(err);return}s.classList.add(err)});const h=document.getElementById("recordLMBtn"),k=document.getElementById("recordLastMod");typeof h<"u"&&h!==null&&h.addEventListener("click",function(t){const e=k.value.split("-");e.length==3&&(o.value=e[0],r.value=e[1],s.value=e[2])});function E(t){let e=t;return e=e.toLowerCase(),e=e.replace(/[^A-Za-z0-9À-ÖØ-öø-ÿ\s,]/g,""),e}const B=document.getElementById("recordArtist"),I=document.getElementById("recordCoder"),b=document.getElementById("recordMusic"),w=document.getElementById("recordWriter");B.addEventListener("input",function(t){B.value=E(B.value)}),I.addEventListener("input",function(t){I.value=E(I.value)}),b.addEventListener("input",function(t){b.value=E(b.value)}),w.addEventListener("input",function(t){w.value=E(w.value)});const n=document.getElementById("recordDemozoo");n.addEventListener("paste",function(t){setTimeout(()=>{try{if(new URL(`${n.value}`).hostname!="demozoo.org"){n.classList.add(err);return}}catch{return}try{const f=new URL(`${n.value}`).pathname.split("/").filter(Boolean);if(f.length!=2){n.classList.add(err);return}switch(f[0]){case"productions":n.value=f[1];break;case"graphics":n.value=f[1];break;default:n.classList.add(err);return}n.classList.remove(err)}catch{n.classList.add(err)}},0)}),n.addEventListener("input",function(t){let e=Number(n.value);if(isNaN(e)){n.classList.add(err);return}if(e<0||e>999999){n.classList.add(err);return}e==0&&(n.value=""),n.classList.remove(err)});const a=document.getElementById("recordPouet");a.addEventListener("paste",function(t){setTimeout(()=>{try{const e=new URL(`${a.value}`);if(console.log(e.hostname),e.hostname!="www.pouet.net"){a.classList.add(err);return}}catch{return}try{const e=new URL(`${a.value}`);if(e.pathname!="/prod.php"){a.classList.add(err);return}const R=new URLSearchParams(e.search).get("which");a.value=R,a.classList.remove(err)}catch{a.classList.add(err)}},0)}),a.addEventListener("input",function(t){let e=Number(a.value);if(isNaN(e)){a.classList.add(err);return}if(e<0||e>199999){a.classList.add(err);return}e==0&&(a.value=""),a.classList.remove(err)});const L=document.getElementById("record16colors");L.addEventListener("paste",function(t){setTimeout(()=>{try{const e=new URL(`${L.value}`);if(e.hostname!="16colo.rs"){L.classList.add(err);return}const m=e.pathname;L.value=m,L.classList.remove(err)}catch{}},0)}),L.addEventListener("input",function(t){if(L.value==""){L.classList.remove(err);return}});const u=document.getElementById("recordGitHub");u.addEventListener("paste",function(t){setTimeout(()=>{try{const e=new URL(`${u.value}`);if(e.hostname!="github.com"){u.classList.add(err);return}const m=e.pathname;u.value=m,u.classList.remove(err)}catch{}},0)}),u.addEventListener("input",function(t){if(u.value==""){u.classList.remove(err);return}});const l=document.getElementById("recordYouTube");l.addEventListener("paste",function(t){setTimeout(()=>{try{const e=new URL(`${l.value}`);if(e.hostname!="youtube.com"&&e.hostname!="www.youtube.com"){l.classList.add(err);return}const f=new URLSearchParams(e.search).get("v");l.value=f,u.classList.remove(err)}catch{}},0)}),l.addEventListener("input",function(t){setTimeout(()=>{if(l.value==""){l.classList.remove(err);return}if(new RegExp("^[a-zA-Z0-9_-]{11}$").test(l.value)){l.classList.remove(err);return}l.classList.add(err)},0)});const g=document.getElementById("recordFilename");g.addEventListener("input",function(){if(g.value=g.value.trimStart(),g.value==""){g.classList.add(err);return}g.classList.remove(err)});const d=document.getElementById("recordPlatform"),c=document.getElementById("recordTag"),T=document.getElementById("recordReleasersLabel"),x=document.getElementById("recordTitleLabel");c.addEventListener("change",function(t){setTimeout(()=>{if(c.value=="magazine"){p();return}v()},0)});function p(){T.textContent="Magazine",x.textContent="Issue"}function v(){T.textContent="Releasers",x.textContent="Title"}document.getElementById("recordDosText").addEventListener("click",function(t){d.value="text",c.value="",v()}),document.getElementById("recordAmigaText").addEventListener("click",function(t){d.value="textamiga",c.value="",v()}),document.getElementById("recordProof").addEventListener("click",function(t){d.value="image",c.value="releaseproof",v()}),document.getElementById("recordDostro").addEventListener("click",function(t){d.value="dos",c.value="releaseadvert",v()}),document.getElementById("recordWintro").addEventListener("click",function(t){d.value="windows",c.value="releaseadvert",v()}),document.getElementById("recordBBStro").addEventListener("click",function(t){d.value="dos",c.value="bbs",v()}),document.getElementById("recordBBSAnsi").addEventListener("click",function(t){d.value="ansi",c.value="bbs",v()}),document.getElementById("recordTextMag").addEventListener("click",function(t){d.value="text",c.value="magazine",p()}),document.getElementById("recordDosMag").addEventListener("click",function(t){d.value="dos",c.value="magazine",p()}),document.getElementById("recordReset").addEventListener("click",function(t){setTimeout(()=>{online.checked!=!0?onlineL.classList.add(dang):onlineL.classList.remove(dang),y.classList.remove(dang),c.value=="magazine"?p():v(),document.querySelectorAll("input").forEach(m=>{m.classList.remove(err)},0)})})})();

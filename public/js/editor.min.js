/* editor.min.js */
(()=>{"use strict";const H="Are you sure you want to replace ",J="Refresh the page to see the changes",N="yes",m="text-danger",e="is-invalid",d="is-valid",b=document.getElementById("recordOnline");if(b==null){console.info("the editor modal is not open so this script is not needed");return}const R=document.getElementById("recordOnlineLabel");b.checked!=!0&&R.classList.add(m),b.addEventListener("change",function(n){b.checked==!0?R.classList.remove(m):R.classList.add(m)});const B=document.getElementById("recordReadme"),Z=document.getElementById("recordReadmeList");B.addEventListener("input",function(n){if(B.classList.remove(e),B.classList.remove(d),B.value=="")return;if(!Array.from(Z.options).some(i=>i.value===B.value)){B.classList.add(e);return}B.classList.add(d)});const h=document.getElementById("recordPreview"),V=document.getElementById("recordPreviewList"),W=document.getElementById("recordPreviewBtn");h.addEventListener("input",function(n){h.classList.remove(e),h.classList.remove(d),h.value!=""}),W.addEventListener("click",function(n){if(!Array.from(V.options).some(i=>i.value===h.value)){h.classList.add(e);return}h.classList.add(d)});const T=document.getElementById("recordHideReadme"),U=document.getElementById("recordHideReadmeLabel"),A=document.getElementById("recordReadme");T.checked==!0&&(U.classList.add(m),A.disabled=!0),T.addEventListener("change",function(n){T.checked==!0?(U.classList.add(m),A.disabled=!0):(U.classList.remove(m),A.disabled=!1)});const l=document.getElementById("recordPreviewUp"),Y=document.getElementById("recordPreviewUpBtn"),q=document.getElementById("recordPreviewUpReset");l.addEventListener("change",function(n){l.value!=""&&l.classList.remove(e)}),Y.addEventListener("click",function(n){if(l.value==""){l.classList.add(e),l.classList.remove(d);return}l.classList.remove(e),l.classList.remove(d),l.classList.add(d)}),q.addEventListener("click",function(n){l.value="",l.classList.remove(e),l.classList.remove(d)});const o=document.getElementById("recordArtifact"),F=document.getElementById("recordArtifactBtn"),G=document.getElementById("recordArtifactReset");o.addEventListener("change",function(n){o.value!=""&&o.classList.remove(e)}),F.addEventListener("click",function(n){if(o.value==""){o.classList.add(e),o.classList.remove(d);return}o.classList.remove(e),o.classList.remove(d),window.prompt(H+o.value+`?
Type "`+N+'" to confirm.').toLowerCase()==N&&o.classList.add(d)}),G.addEventListener("click",function(n){o.value="",o.classList.remove(e),o.classList.remove(d)});const L=document.getElementById("recordReleasers"),z=document.getElementById("recordReleasersMax");L.addEventListener("input",function(n){if(L.value=L.value.toUpperCase(),L.value=L.value.replace(/[^a-zA-Z0-9-+& ]/g,""),L.value==""){L.classList.add(e);return}L.classList.remove(e),L.value.split("+").length>2?(L.classList.add(e),z.classList.add(m)):(L.classList.remove(e),z.classList.remove(m))});const u=document.getElementById("recordYear"),s=document.getElementById("recordMonth"),r=document.getElementById("recordDay");u.addEventListener("input",function(n){if(u.value>=1980&&u.value<=2023){u.classList.remove(e);return}if(u.value==""&&s.value==""&&r.value==""){u.classList.remove(e),s.classList.remove(e),r.classList.remove(e);return}u.classList.add(e)}),s.addEventListener("input",function(n){if(s.value>=1&&s.value<=12){s.classList.remove(e);return}if(u.value==""&&s.value==""&&r.value==""){u.classList.remove(e),s.classList.remove(e),r.classList.remove(e);return}if(s.value==""&&r.value==""){s.classList.remove(e),r.classList.remove(e);return}s.classList.add(e)}),r.addEventListener("input",function(n){if(s.value>=1&&s.value<=31){s.classList.remove(e);return}if(u.value==""&&s.value==""&&r.value==""){u.classList.remove(e),s.classList.remove(e),r.classList.remove(e);return}if(s.value==""&&r.value==""){s.classList.remove(e),r.classList.remove(e);return}if(r.value==""){r.classList.remove(e);return}r.classList.add(e)});const O=document.getElementById("recordLMBtn"),_=document.getElementById("recordLastMod");typeof O<"u"&&O!==null&&O.addEventListener("click",function(n){const t=_.value.split("-");t.length==3&&(u.value=t[0],s.value=t[1],r.value=t[2])});function k(n){let t=n;return t=t.toLowerCase(),t=t.replace(/[^A-Za-z0-9À-ÖØ-öø-ÿ\s,]/g,""),t}const P=document.getElementById("recordArtist"),j=document.getElementById("recordCoder"),M=document.getElementById("recordMusic"),C=document.getElementById("recordWriter");P.addEventListener("input",function(n){P.value=k(P.value)}),j.addEventListener("input",function(n){j.value=k(j.value)}),M.addEventListener("input",function(n){M.value=k(M.value)}),C.addEventListener("input",function(n){C.value=k(C.value)});const a=document.getElementById("recordDemozoo");a.addEventListener("paste",function(n){setTimeout(()=>{try{if(new URL(`${a.value}`).hostname!="demozoo.org"){a.classList.add(e);return}}catch{return}try{const I=new URL(`${a.value}`).pathname.split("/").filter(Boolean);if(I.length!=2){a.classList.add(e);return}switch(I[0]){case"productions":a.value=I[1];break;case"graphics":a.value=I[1];break;default:a.classList.add(e);return}a.classList.remove(e)}catch{a.classList.add(e)}},0)}),a.addEventListener("input",function(n){let t=Number(a.value);if(isNaN(t)){a.classList.add(e);return}if(t<0||t>999999){a.classList.add(e);return}t==0&&(a.value=""),a.classList.remove(e)});const c=document.getElementById("recordPouet");c.addEventListener("paste",function(n){setTimeout(()=>{try{const t=new URL(`${c.value}`);if(console.log(t.hostname),t.hostname!="www.pouet.net"){c.classList.add(e);return}}catch{return}try{const t=new URL(`${c.value}`);if(t.pathname!="/prod.php"){c.classList.add(e);return}const D=new URLSearchParams(t.search).get("which");c.value=D,c.classList.remove(e)}catch{c.classList.add(e)}},0)}),c.addEventListener("input",function(n){let t=Number(c.value);if(isNaN(t)){c.classList.add(e);return}if(t<0||t>199999){c.classList.add(e);return}t==0&&(c.value=""),c.classList.remove(e)});const y=document.getElementById("record16colors");y.addEventListener("paste",function(n){setTimeout(()=>{try{const t=new URL(`${y.value}`);if(t.hostname!="16colo.rs"){y.classList.add(e);return}const i=t.pathname;y.value=i,y.classList.remove(e)}catch{}},0)}),y.addEventListener("input",function(n){if(y.value==""){y.classList.remove(e);return}});const E=document.getElementById("recordGitHub");E.addEventListener("paste",function(n){setTimeout(()=>{try{const t=new URL(`${E.value}`);if(t.hostname!="github.com"){E.classList.add(e);return}const i=t.pathname;E.value=i,E.classList.remove(e)}catch{}},0)}),E.addEventListener("input",function(n){if(E.value==""){E.classList.remove(e);return}});const f=document.getElementById("recordYouTube");f.addEventListener("paste",function(n){setTimeout(()=>{try{const t=new URL(`${f.value}`);if(t.hostname!="youtube.com"&&t.hostname!="www.youtube.com"){f.classList.add(e);return}const I=new URLSearchParams(t.search).get("v");f.value=I,E.classList.remove(e)}catch{}},0)}),f.addEventListener("input",function(n){setTimeout(()=>{if(f.value==""){f.classList.remove(e);return}if(new RegExp("^[a-zA-Z0-9_-]{11}$").test(f.value)){f.classList.remove(e);return}f.classList.add(e)},0)});const w=document.getElementById("recordFilename");w.addEventListener("input",function(){if(w.value=w.value.trimStart(),w.value==""){w.classList.add(e);return}w.classList.remove(e)});const p=document.getElementById("recordPlatform"),v=document.getElementById("recordTag"),$=document.getElementById("recordReleasersLabel"),S=document.getElementById("recordTitleLabel");v.addEventListener("change",function(n){setTimeout(()=>{if(v.value=="magazine"){x();return}g()},0)});function x(){$.textContent="Magazine",S.textContent="Issue"}function g(){$.textContent="Releasers",S.textContent="Title"}document.getElementById("recordDosText").addEventListener("click",function(n){p.value="text",v.value="",g()}),document.getElementById("recordAmigaText").addEventListener("click",function(n){p.value="textamiga",v.value="",g()}),document.getElementById("recordProof").addEventListener("click",function(n){p.value="image",v.value="releaseproof",g()}),document.getElementById("recordDostro").addEventListener("click",function(n){p.value="dos",v.value="releaseadvert",g()}),document.getElementById("recordWintro").addEventListener("click",function(n){p.value="windows",v.value="releaseadvert",g()}),document.getElementById("recordBBStro").addEventListener("click",function(n){p.value="dos",v.value="bbs",g()}),document.getElementById("recordBBSAnsi").addEventListener("click",function(n){p.value="ansi",v.value="bbs",g()}),document.getElementById("recordTextMag").addEventListener("click",function(n){p.value="text",v.value="magazine",x()}),document.getElementById("recordDosMag").addEventListener("click",function(n){p.value="dos",v.value="magazine",x()}),document.getElementById("recordReset").addEventListener("click",function(n){setTimeout(()=>{b.checked!=!0?R.classList.add(m):R.classList.remove(m),z.classList.remove(m),v.value=="magazine"?x():g(),document.querySelectorAll("input").forEach(i=>{i.classList.remove(e)},0)})})})();

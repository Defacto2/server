/* editor-newforapproval.min.js */
(()=>{"use strict";const a=document.getElementsByName("editorGetDemozoo");for(let t of a)t.addEventListener("click",i,!1);function c(t){console.log("event listener removed"),t.target.removeEventListener("click",i,!1)}function i(t){const s=t.target,n=t.target.dataset.id,r=t.target.dataset.uid;s.classList.add("btn-outline-primary"),s.classList.remove("btn-outline-warning","btn-outline-danger","btn-outline-success");const e=document.getElementById("editorFeedback"+n);e.classList.remove("text-danger-emphasis","text-success-emphasis"),e.classList.add("text-primary-emphasis"),e.textContent=`Fetching download from Demozoo ID ${n}`,fetch("/editor/get/demozoo/download/"+n+"?uuid="+r,{method:"GET",headers:{"Content-Type":"application/json"}}).then(o=>o.json()).then(o=>{console.log(JSON.stringify(o,null,2)),o.success?(s.classList.add("btn-outline-success"),s.classList.remove("btn-outline-primary"),e.classList.remove("text-primary-emphasis"),e.classList.add("text-success-emphasis"),e.textContent=`Success, got ${o.filename}, refresh the page to see changes`,s.disabled=!0,c(t)):(s.classList.add("btn-outline-danger"),s.classList.remove("btn-outline-primary"),e.classList.remove("text-primary-emphasis"),e.classList.add("text-danger-emphasis"),e.textContent=`Problem, ${o.error}`)})}})();

/* editor-forapproval.min.js Â© Defacto2 2024 */
(()=>{"use strict";const c=document.getElementsByName("editorGetDemozoo"),i=[];for(const t of c){t.addEventListener("click",a,!1);const e=t.dataset.uid;e?i.push(e):console.error("No UUID found")}console.log("workQueue",i);function r(t){console.log("event listener removed"),t.target.removeEventListener("click",a,!1)}function a(t){const e=t.target,n=t.target.dataset.id,l=t.target.dataset.uid;e.classList.add("btn-outline-primary"),e.classList.remove("btn-outline-warning","btn-outline-danger","btn-outline-success");const s=document.getElementById("editorFeedback"+n);s.classList.remove("text-danger-emphasis","text-success-emphasis"),s.classList.add("text-primary-emphasis"),s.textContent=`Fetching download from Demozoo ID ${n}`,fetch("/editor/get/demozoo/download/"+n+"?uuid="+l,{method:"GET",headers:{"Content-Type":"application/json"}}).then(o=>o.json()).then(o=>{console.log(JSON.stringify(o,null,2)),o.success?(e.classList.add("btn-outline-success"),e.classList.remove("btn-outline-primary"),s.classList.remove("text-primary-emphasis"),s.classList.add("text-success-emphasis"),s.textContent=`Success, got ${o.filename}, refresh the page to see changes`,e.disabled=!0,r(t)):(e.classList.add("btn-outline-danger"),e.classList.remove("btn-outline-primary"),s.classList.remove("text-primary-emphasis"),s.classList.add("text-danger-emphasis"),s.textContent=`Problem, ${o.error}`)})}})();

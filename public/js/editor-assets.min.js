/* editor-assets.min.js Â© Defacto2 2024 */
(()=>{var k=100,L=1024*1024,H=100*L;function c(s,l){if(s==null)throw new Error("The formId value of progress is null.");if(l==null)throw new Error("The elementId value of progress is null.");htmx.on(`#${s}`,"htmx:xhr:progress",function(a){a.target.id==`${s}`&&htmx.find(`#${l}`).setAttribute("value",a.detail.loaded/a.detail.total*k)})}(()=>{"use strict";c("artifact-editor-dl-form","artifact-editor-dl-progress"),c("artifact-editor-preview-form","artifact-editor-preview-progress");let s=document.getElementById("artifact-editor-preview-reset");if(s==null){console.error("the reset preview button is missing");return}let l=document.getElementById("artifact-editor-replace-preview");if(l==null){console.error("the form preview input is missing");return}let a=document.getElementById("artifact-editor-dl-reset");if(a==null){console.error("the reset button is missing");return}let u=document.getElementById("artifact-editor-dl-up");if(u==null){console.error("the artifact file input is missing");return}let d=document.getElementById("artifact-editor-modal");if(d==null){console.error("the data editor modal is missing");return}let f=document.getElementById("asset-editor-modal");if(f==null){console.error("the asset editor modal is missing");return}let h=document.getElementById("emulate-editor-modal");if(h==null){console.error("the emulate editor modal is missing");return}let p=new bootstrap.Modal(d),x=new bootstrap.Modal(f),v=new bootstrap.Modal(h);switch(new URL(window.location.href).hash){case"#data-editor":p.show();break;case"#file-editor":x.show();break;case"#emulate-editor":v.show();break;default:}document.body.addEventListener("htmx:afterRequest",function(e){m(e,"artifact-editor-dl-form","artifact-editor-dl-up","artifact-editor-dl-feedback"),m(e,"artifact-editor-preview-form","artifact-editor-replace-preview","artifact-editor-preview-feedback"),g(e,"artifact-editor-image-delete","artifact-editor-image-feedback"),T(e,"artifact-editor-link-delete","artifact-editor-link-feedback")});function g(e,n,r){if(e.detail.elt===null||e.detail.elt.id!==`${n}`)return;let t=document.getElementById(r);if(t===null)throw new Error(`The htmx successful feedback element ${r} is null`);let o="text-danger",i="text-success",w=e.detail.xhr;if(e.detail.successful){t.innerText="The delete request was successful, about to refresh the page.",t.classList.remove(o),t.classList.add(i),setTimeout(()=>{location.reload()},500);return}if(e.detail.failed&&e.detail.xhr){t.classList.add(o),t.innerText=`Something on the server is not working, ${w.status} status: ${w.responseText}.`;return}t.classList.add(o),t.innerText="Something with the browser is not working, please try again or refresh the page."}function T(e,n,r){if(e.detail.elt===null||e.detail.elt.id!==`${n}`)return;let t=document.getElementById(r);if(t===null)throw new Error(`The htmx successful feedback element ${r} is null`);let o="text-danger",i=e.detail.xhr;if(e.detail.successful){t.innerText=`${i.responseText}`,t.classList.remove(o);return}if(e.detail.failed&&e.detail.xhr){t.classList.add(o),t.innerText=`Something on the server is not working, ${i.status} status: ${i.responseText}.`;return}t.classList.add(o),t.innerText="Something with the browser is not working, please try again or refresh the page."}function m(e,n,r,t){if(e.detail.elt===null||e.detail.elt.id!==`${n}`)return;let o=document.getElementById(r);if(o===null)throw new Error(`The htmx successful input element ${r} is null`);let i=document.getElementById(t);if(i===null)throw new Error(`The htmx successful feedback element ${t} is null`);if(e.detail.successful)return E(e,o,i);if(e.detail.failed&&e.detail.xhr)return b(e,o,i);y(o,i)}function E(e,n,r){let t=e.detail.xhr;r.innerText=`${t.responseText}`,r.classList.remove("invalid-feedback"),r.classList.add("valid-feedback"),n.classList.remove("is-invalid"),n.classList.add("is-valid"),setTimeout(()=>{location.reload()},500)}function b(e,n,r){let t=e.detail.xhr;r.innerText=`Something on the server is not working, ${t.status} status: ${t.responseText}.`,r.classList.remove("valid-feedback"),r.classList.add("invalid-feedback"),n.classList.remove("is-valid"),n.classList.add("is-invalid")}function y(e,n){e.classList.remove("is-valid"),e.classList.add("is-invalid"),n.innerText="Something with the browser is not working, please try again or refresh the page.",n.classList.remove("d-none")}a.addEventListener("click",function(){u.value="",u.classList.remove("is-invalid","is-valid")}),s.addEventListener("click",function(){l.value="",l.classList.remove("is-invalid","is-valid")})})();})();

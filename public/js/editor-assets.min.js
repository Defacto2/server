/* editor-assets.min.js */
(()=>{"use strict";const E="Are you sure you want to replace ",h="yes",i="text-danger",t="is-invalid",n="is-valid",m=document.getElementById("recordID");if(m==null){console.info("the editor modal is not open so this script is not needed");return}document.getElementById("edMeBtn").addEventListener("click",function(r){fetch("/editor/readme/delete",{method:"POST",body:JSON.stringify({id:parseInt(m.value)}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(e=>{if(!e.ok)throw new Error("server could not save the change");return e.json()}).catch(e=>{console.log(e)})}),document.getElementById("edImgBtn").addEventListener("click",function(r){alert("delete images"),fetch("/editor/images/delete",{method:"POST",body:JSON.stringify({id:parseInt(m.value)}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(e=>{if(!e.ok)throw new Error("server could not save the change");return e.json()}).catch(e=>{console.log(e)})});const c=document.getElementById("recordReadme"),p=document.getElementById("recordReadmeList");c.addEventListener("input",function(r){if(c.classList.remove(t),c.classList.remove(n),c.value=="")return;if(!Array.from(p.options).some(o=>o.value===c.value)){c.classList.add(t);return}fetch("/editor/readme/copy",{method:"POST",body:JSON.stringify({id:parseInt(m.value),target:c.value}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(o=>{if(!o.ok)throw new Error("server could not save the change");return l.classList.add(n),o.json()}).catch(o=>{y.textContent=o.message,g.classList.add(t)}),c.classList.add(n)});const l=document.getElementById("recordHideReadme"),v=document.getElementById("recordHideReadmeLabel"),u=document.getElementById("recordReadme"),g=document.getElementById("recordHideReadme"),y=document.getElementById("recordHideReadmeErr");l.checked==!0&&(v.classList.add(i),u.disabled=!0),l.addEventListener("change",function(r){l.checked==!0?(v.classList.add(i),u.disabled=!0):(v.classList.remove(i),u.disabled=!1),fetch("/editor/readme",{method:"POST",body:JSON.stringify({id:parseInt(m.value),readme:l.checked}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(e=>{if(!e.ok)throw new Error("server could not save the change");return l.classList.add(n),e.json()}).catch(e=>{y.textContent=e.message,g.classList.add(t)})});const a=document.getElementById("recordPreview"),B=document.getElementById("recordPreviewList"),I=document.getElementById("recordPreviewBtn");a.addEventListener("input",function(r){a.classList.remove(t),a.classList.remove(n),a.value!=""}),I.addEventListener("click",function(r){if(!Array.from(B.options).some(o=>o.value===a.value)){a.classList.add(t);return}a.classList.add(n)});const d=document.getElementById("recordPreviewUp"),w=document.getElementById("recordPreviewUpBtn"),k=document.getElementById("recordPreviewUpReset");d.addEventListener("change",function(r){d.value!=""&&d.classList.remove(t)}),w.addEventListener("click",function(r){if(d.value==""){d.classList.add(t),d.classList.remove(n);return}d.classList.remove(t),d.classList.remove(n),d.classList.add(n)}),k.addEventListener("click",function(r){d.value="",d.classList.remove(t),d.classList.remove(n)});const s=document.getElementById("recordArtifact"),R=document.getElementById("recordArtifactBtn"),O=document.getElementById("recordArtifactReset");s.addEventListener("change",function(r){s.value!=""&&s.classList.remove(t)}),R.addEventListener("click",function(r){if(s.value==""){s.classList.add(t),s.classList.remove(n);return}s.classList.remove(t),s.classList.remove(n),window.prompt(E+s.value+`?
Type "`+h+'" to confirm.').toLowerCase()==h&&s.classList.add(n)}),O.addEventListener("click",function(r){s.value="",s.classList.remove(t),s.classList.remove(n)});const L=document.getElementById("recordOnline"),f=document.getElementById("recordOnlineLabel");L.checked!=!0&&f.classList.add(i),L.addEventListener("change",function(r){L.checked==!0?f.classList.remove(i):f.classList.add(i)})})();

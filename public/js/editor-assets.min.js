/* editor-assets.min.js */
(()=>{"use strict";const l="text-danger",t="is-invalid",n="is-valid",y="valid-feedback",B="invalid-feedback",v={"Content-type":"application/json; charset=UTF-8"},f="server could not save the change",u=document.getElementById("recordID");if(u==null){console.info("the editor modal is not open so this script is not needed");return}document.getElementById("edBtnRead").addEventListener("click",function(c){if(!window.confirm("Delete the readme or textfile?"))return;const d=document.getElementById("edBtnsHide"),e=document.getElementById("edBtnsFeedback");fetch("/editor/readme/delete",{method:"POST",body:JSON.stringify({id:parseInt(u.value)}),headers:v}).then(i=>{if(!i.ok)throw new Error(f);return d.classList.add(n),e.classList.add(y),e.textContent="readme or textfile deleted, refresh the page to see the change",i.json()}).catch(i=>{d.classList.add(t),e.classList.add(B),e.textContent=i.message,console.log(i)})}),document.getElementById("edBtnImgs").addEventListener("click",function(c){if(!window.confirm("Delete the previews and thumbnail?"))return;const d=document.getElementById("edBtnsHide"),e=document.getElementById("edBtnsFeedback");fetch("/editor/images/delete",{method:"POST",body:JSON.stringify({id:parseInt(u.value)}),headers:v}).then(i=>{if(!i.ok)throw new Error(f);return d.classList.add(n),e.classList.add(y),e.textContent="images deleted, refresh the page to see the change",i.json()}).catch(i=>{d.classList.add(t),e.classList.add(B),e.textContent=i.message})});const a=document.getElementById("recordReadme"),w=document.getElementById("recordReadmeList");a.addEventListener("input",function(c){if(a.classList.remove(t),a.classList.remove(n),a.value=="")return;if(!Array.from(w.options).some(e=>e.value===a.value)){a.classList.add(t);return}fetch("/editor/readme/copy",{method:"POST",body:JSON.stringify({id:parseInt(u.value),target:a.value}),headers:v}).then(e=>{if(!e.ok)throw new Error(f);return m.classList.add(n),e.json()}).catch(e=>{p.textContent=e.message,I.classList.add(t)}),a.classList.add(n)});const m=document.getElementById("recordHideReadme"),L=document.getElementById("recordHideReadmeLabel"),h=document.getElementById("recordReadme"),I=document.getElementById("recordHideReadme"),p=document.getElementById("recordHideReadmeErr");m.checked==!0&&(L.classList.add(l),h.disabled=!0),m.addEventListener("change",function(c){m.checked==!0?(L.classList.add(l),h.disabled=!0):(L.classList.remove(l),h.disabled=!1),fetch("/editor/readme/hide",{method:"POST",body:JSON.stringify({id:parseInt(u.value),readme:m.checked}),headers:v}).then(d=>{if(!d.ok)throw new Error(f);return m.classList.add(n),d.json()}).catch(d=>{p.textContent=d.message,I.classList.add(t)})});const o=document.getElementById("recordPreview"),k=document.getElementById("recordPreviewList"),b=document.getElementById("recordPreviewBtn");o.addEventListener("input",function(c){o.classList.remove(t),o.classList.remove(n),o.value!=""}),b.addEventListener("click",function(c){if(!Array.from(k.options).some(e=>e.value===o.value)){o.classList.add(t);return}o.classList.add(n)});const r=document.getElementById("recordPreviewUp"),x=document.getElementById("recordPreviewUpBtn"),R=document.getElementById("recordPreviewUpReset");r.addEventListener("change",function(c){r.value!=""&&r.classList.remove(t)}),x.addEventListener("click",function(c){if(r.value==""){r.classList.add(t),r.classList.remove(n);return}r.classList.remove(t),r.classList.remove(n),r.classList.add(n)}),R.addEventListener("click",function(c){r.value="",r.classList.remove(t),r.classList.remove(n)});const s=document.getElementById("recordArtifact"),O=document.getElementById("recordArtifactBtn"),P=document.getElementById("recordArtifactReset");s.addEventListener("change",function(c){s.value!=""&&s.classList.remove(t)}),O.addEventListener("click",function(c){if(s.value==""){s.classList.add(t),s.classList.remove(n);return}s.classList.remove(t),s.classList.remove(n),window.prompt("Replace "+s.value+`?
Type "yes" to confirm.`).toLowerCase()=="yes"&&s.classList.add(n)}),P.addEventListener("click",function(c){s.value="",s.classList.remove(t),s.classList.remove(n)});const g=document.getElementById("recordOnline"),E=document.getElementById("recordOnlineLabel");g.checked!=!0&&E.classList.add(l),g.addEventListener("change",function(c){g.checked==!0?E.classList.remove(l):E.classList.add(l)})})();

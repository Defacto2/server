/* editor-assets.min.js */
(()=>{"use strict";const m="text-danger",e="is-invalid",t="is-valid",g="valid-feedback",E="invalid-feedback",u={"Content-type":"application/json; charset=UTF-8"},f="server could not save the change",v=document.getElementById("recordID");if(v==null){console.info("the editor modal is not open so this script is not needed");return}document.getElementById("edBtnRead").addEventListener("click",function(c){if(!window.confirm("Delete the readme or textfile?"))return;const r=document.getElementById("edBtnsHide"),n=document.getElementById("edBtnsFeedback");fetch("/editor/readme/delete",{method:"POST",body:JSON.stringify({id:parseInt(v.value)}),headers:u}).then(s=>{if(!s.ok)throw new Error(f);return r.classList.add(t),n.classList.add(g),n.textContent="readme or textfile deleted, refresh the page to see the change",s.json()}).catch(s=>{r.classList.add(e),n.classList.add(E),n.textContent=s.message,console.log(s)})}),document.getElementById("edBtnImgs").addEventListener("click",function(c){if(!window.confirm("Delete the previews and thumbnail?"))return;const r=document.getElementById("edBtnsHide"),n=document.getElementById("edBtnsFeedback");fetch("/editor/images/delete",{method:"POST",body:JSON.stringify({id:parseInt(v.value)}),headers:u}).then(s=>{if(!s.ok)throw new Error(f);return r.classList.add(t),n.classList.add(g),n.textContent="images deleted, refresh the page to see the change",s.json()}).catch(s=>{r.classList.add(e),n.classList.add(E),n.textContent=s.message})});const d=document.getElementById("edCopyMe");d.addEventListener("input",function(c){if(d.classList.remove(e),d.classList.remove(t),d.value=="")return;const r=document.getElementById("edCopyMeList");if(!Array.from(r.options).some(s=>s.value===d.value)){d.classList.add(e);return}fetch("/editor/readme/copy",{method:"POST",body:JSON.stringify({id:parseInt(v.value),target:d.value}),headers:u}).then(s=>{if(!s.ok)throw new Error(f);return d.classList.add(t),s.json()}).catch(s=>{document.getElementById("edCopyMeErr").textContent=s.message,r.classList.add(e)})}),document.getElementById("edCopyMeReset").addEventListener("click",function(c){d.value="",d.classList.remove(e),d.classList.remove(t),a.classList.remove(e),a.classList.remove(t)});const a=document.getElementById("edHideMe");a.checked==!0&&(document.getElementById("edHideMeLabel").classList.add(m),d.disabled=!0),a.addEventListener("change",function(c){const r=document.getElementById("edHideMeLabel");a.checked==!0?(r.classList.add(m),d.disabled=!0):(r.classList.remove(m),d.disabled=!1),fetch("/editor/readme/hide",{method:"POST",body:JSON.stringify({id:parseInt(v.value),readme:a.checked}),headers:u}).then(n=>{if(!n.ok)throw new Error(f);return a.classList.add(t),n.json()}).catch(n=>{document.getElementById("edHideMeErr").textContent=n.message,a.classList.add(e)})});const l=document.getElementById("recordPreview"),y=document.getElementById("recordPreviewList"),B=document.getElementById("recordPreviewBtn");l.addEventListener("input",function(c){l.classList.remove(e),l.classList.remove(t),l.value!=""}),B.addEventListener("click",function(c){if(!Array.from(y.options).some(n=>n.value===l.value)){l.classList.add(e);return}l.classList.add(t)});const o=document.getElementById("recordPreviewUp"),p=document.getElementById("recordPreviewUpBtn"),I=document.getElementById("recordPreviewUpReset");o.addEventListener("change",function(c){o.value!=""&&o.classList.remove(e)}),p.addEventListener("click",function(c){if(o.value==""){o.classList.add(e),o.classList.remove(t);return}o.classList.remove(e),o.classList.remove(t),o.classList.add(t)}),I.addEventListener("click",function(c){o.value="",o.classList.remove(e),o.classList.remove(t)});const i=document.getElementById("recordArtifact"),w=document.getElementById("recordArtifactBtn"),k=document.getElementById("recordArtifactReset");i.addEventListener("change",function(c){i.value!=""&&i.classList.remove(e)}),w.addEventListener("click",function(c){if(i.value==""){i.classList.add(e),i.classList.remove(t);return}i.classList.remove(e),i.classList.remove(t),window.prompt("Replace "+i.value+`?
Type "yes" to confirm.`).toLowerCase()=="yes"&&i.classList.add(t)}),k.addEventListener("click",function(c){i.value="",i.classList.remove(e),i.classList.remove(t)});const L=document.getElementById("recordOnline"),h=document.getElementById("recordOnlineLabel");L.checked!=!0&&h.classList.add(m),L.addEventListener("change",function(c){L.checked==!0?h.classList.remove(m):h.classList.add(m)})})();

/* editor-assets.min.js */
(()=>{"use strict";const u="text-danger",t="is-invalid",n="is-valid",B="valid-feedback",p="invalid-feedback",L={"Content-type":"application/json; charset=UTF-8"},f="server could not save the change",v=document.getElementById("recordID");if(v==null){console.info("the editor modal is not open so this script is not needed");return}document.getElementById("edBtnRead").addEventListener("click",function(d){if(!window.confirm("Delete the readme or textfile?"))return;const o=document.getElementById("edBtnsHide"),e=document.getElementById("edBtnsFeedback");fetch("/editor/readme/delete",{method:"POST",body:JSON.stringify({id:parseInt(v.value)}),headers:L}).then(s=>{if(!s.ok)throw new Error(f);return o.classList.add(n),e.classList.add(B),e.textContent="readme or textfile deleted, refresh the page to see the change",s.json()}).catch(s=>{o.classList.add(t),e.classList.add(p),e.textContent=s.message,console.log(s)})}),document.getElementById("edBtnImgs").addEventListener("click",function(d){if(!window.confirm("Delete the previews and thumbnail?"))return;const o=document.getElementById("edBtnsHide"),e=document.getElementById("edBtnsFeedback");fetch("/editor/images/delete",{method:"POST",body:JSON.stringify({id:parseInt(v.value)}),headers:L}).then(s=>{if(!s.ok)throw new Error(f);return o.classList.add(n),e.classList.add(B),e.textContent="images deleted, refresh the page to see the change",s.json()}).catch(s=>{o.classList.add(t),e.classList.add(p),e.textContent=s.message})});const i=document.getElementById("edCopyMe");i.addEventListener("input",function(d){if(i.classList.remove(t),i.classList.remove(n),i.value=="")return;const o=document.getElementById("edCopyMeList");if(!Array.from(o.options).some(s=>s.value===i.value)){i.classList.add(t),document.getElementById("edCopyMeErr").textContent="unknown filename",o.classList.remove(t);return}fetch("/editor/readme/copy",{method:"POST",body:JSON.stringify({id:parseInt(v.value),target:i.value}),headers:L}).then(s=>{if(!s.ok)throw new Error(f);return i.classList.add(n),s.json()}).catch(s=>{document.getElementById("edCopyMeErr").textContent=s.message,o.classList.add(t)})}),document.getElementById("edCopyMeReset").addEventListener("click",function(d){i.value="",i.classList.remove(t),i.classList.remove(n),m.classList.remove(t),m.classList.remove(n),document.getElementById("edCopyMeList").classList.remove(t)});const m=document.getElementById("edHideMe");m.checked==!0&&(document.getElementById("edHideMeLabel").classList.add(u),i.disabled=!0),m.addEventListener("change",function(d){const o=document.getElementById("edHideMeLabel");m.checked==!0?(o.classList.add(u),i.disabled=!0):(o.classList.remove(u),i.disabled=!1),fetch("/editor/readme/hide",{method:"POST",body:JSON.stringify({id:parseInt(v.value),readme:m.checked}),headers:L}).then(e=>{if(!e.ok)throw new Error(f);return m.classList.add(n),e.json()}).catch(e=>{document.getElementById("edHideMeErr").textContent=e.message,m.classList.add(t)})});const r=document.getElementById("edCopyPreview"),g=document.getElementById("edCopyPreviewList"),I=document.getElementById("edCopyPreviewBtn");r.addEventListener("input",function(d){r.classList.remove(t),r.classList.remove(n),r.value!=""}),I.addEventListener("click",function(d){if(!Array.from(g.options).some(e=>e.value===r.value)){r.classList.add(t),document.getElementById("edCopyPreviewErr").textContent="unknown filename",g.classList.remove(t);return}fetch("/editor/images/copy",{method:"POST",body:JSON.stringify({id:parseInt(v.value),target:r.value}),headers:L}).then(e=>{if(console.log(e),!e.ok){throw console.log("not ok"),new Error(f);return}return r.classList.add(n),e.json()}).catch(e=>{console.log(e),document.getElementById("edCopyPreviewErr").textContent=e.message,g.classList.add(t)})}),document.getElementById("edCopyPreviewReset").addEventListener("click",function(){r.value="",r.classList.remove(t),r.classList.remove(n),document.getElementById("edCopyPreviewErr").textContent="",g.classList.remove(t)});const l=document.getElementById("edAnsiLove"),y=document.getElementById("edAnsiLoveList"),w=document.getElementById("edAnsiLoveBtn");l.addEventListener("input",function(d){l.classList.remove(t),l.classList.remove(n),l.value!=""}),w.addEventListener("click",function(d){if(!Array.from(y.options).some(e=>e.value===l.value)){l.classList.add(t),document.getElementById("edAnsiLoveErr").textContent="unknown filename",y.classList.remove(t);return}fetch("/editor/ansilove/copy",{method:"POST",body:JSON.stringify({id:parseInt(v.value),target:l.value}),headers:L}).then(e=>{if(console.log(e),!e.ok){throw console.log("not ok"),new Error(f);return}return l.classList.add(n),e.json()}).catch(e=>{console.log(e),document.getElementById("edAnsiLoveErr").textContent=e.message,y.classList.add(t)})}),document.getElementById("edAnsiLoveReset").addEventListener("click",function(){l.value="",l.classList.remove(t),l.classList.remove(n),document.getElementById("edAnsiLoveErr").textContent="",y.classList.remove(t)});const c=document.getElementById("edUploadPreview"),k=document.getElementById("edUploadPreviewBtn"),C=document.getElementById("edUploadPreviewReset");c.addEventListener("change",function(d){c.value!=""&&c.classList.remove(t)}),k.addEventListener("click",function(d){if(c.value==""){c.classList.add(t),c.classList.remove(n);return}c.classList.remove(t),c.classList.remove(n),c.classList.add(n)}),C.addEventListener("click",function(d){c.value="",c.classList.remove(t),c.classList.remove(n)});const a=document.getElementById("edUploadArtifact"),x=document.getElementById("edUploadArtifactBtn"),b=document.getElementById("edUploadArtifactReset");a.addEventListener("change",function(d){a.value!=""&&a.classList.remove(t)}),x.addEventListener("click",function(d){if(a.value==""){a.classList.add(t),a.classList.remove(n);return}a.classList.remove(t),a.classList.remove(n),window.prompt("Replace "+a.value+`?
Type "yes" to confirm.`).toLowerCase()=="yes"&&a.classList.add(n)}),b.addEventListener("click",function(d){a.value="",a.classList.remove(t),a.classList.remove(n)});const E=document.getElementById("recordOnline"),h=document.getElementById("recordOnlineLabel");E.checked!=!0&&h.classList.add(u),E.addEventListener("change",function(d){E.checked==!0?h.classList.remove(u):h.classList.add(u)})})();

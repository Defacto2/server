/* editor-assets.min.js */
(()=>{"use strict";const u="text-danger",t="is-invalid",n="is-valid",B="valid-feedback",I="invalid-feedback",L={"Content-type":"application/json; charset=UTF-8"},f="server could not save the change",v=document.getElementById("recordID");if(v==null){console.info("the editor modal is not open so this script is not needed");return}document.getElementById("edBtnRead").addEventListener("click",function(d){if(!window.confirm("Delete the readme or textfile?"))return;const i=document.getElementById("edBtnsHide"),e=document.getElementById("edBtnsFeedback");fetch("/editor/readme/delete",{method:"POST",body:JSON.stringify({id:parseInt(v.value)}),headers:L}).then(s=>{if(!s.ok)throw new Error(f);return i.classList.add(n),e.classList.add(B),e.textContent="readme or textfile deleted, refresh the page to see the change",s.json()}).catch(s=>{i.classList.add(t),e.classList.add(I),e.textContent=s.message,console.log(s)})}),document.getElementById("edBtnImgs").addEventListener("click",function(d){if(!window.confirm("Delete the previews and thumbnail?"))return;const i=document.getElementById("edBtnsHide"),e=document.getElementById("edBtnsFeedback");fetch("/editor/images/delete",{method:"POST",body:JSON.stringify({id:parseInt(v.value)}),headers:L}).then(s=>{if(!s.ok)throw new Error(f);return i.classList.add(n),e.classList.add(B),e.textContent="images deleted, refresh the page to see the change",s.json()}).catch(s=>{i.classList.add(t),e.classList.add(I),e.textContent=s.message})});const o=document.getElementById("edCopyMe");o.addEventListener("input",function(d){if(o.classList.remove(t),o.classList.remove(n),o.value=="")return;const i=document.getElementById("edCopyMeList");if(!Array.from(i.options).some(s=>s.value===o.value)){o.classList.add(t);return}fetch("/editor/readme/copy",{method:"POST",body:JSON.stringify({id:parseInt(v.value),target:o.value}),headers:L}).then(s=>{if(!s.ok)throw new Error(f);return o.classList.add(n),s.json()}).catch(s=>{document.getElementById("edCopyMeErr").textContent=s.message,i.classList.add(t)})}),document.getElementById("edCopyMeReset").addEventListener("click",function(d){o.value="",o.classList.remove(t),o.classList.remove(n),m.classList.remove(t),m.classList.remove(n)});const m=document.getElementById("edHideMe");m.checked==!0&&(document.getElementById("edHideMeLabel").classList.add(u),o.disabled=!0),m.addEventListener("change",function(d){const i=document.getElementById("edHideMeLabel");m.checked==!0?(i.classList.add(u),o.disabled=!0):(i.classList.remove(u),o.disabled=!1),fetch("/editor/readme/hide",{method:"POST",body:JSON.stringify({id:parseInt(v.value),readme:m.checked}),headers:L}).then(e=>{if(!e.ok)throw new Error(f);return m.classList.add(n),e.json()}).catch(e=>{document.getElementById("edHideMeErr").textContent=e.message,m.classList.add(t)})});const a=document.getElementById("recordPreview"),g=document.getElementById("recordPreviewList"),p=document.getElementById("recordPreviewBtn");a.addEventListener("input",function(d){a.classList.remove(t),a.classList.remove(n),a.value!=""}),p.addEventListener("click",function(d){if(!Array.from(g.options).some(e=>e.value===a.value)){a.classList.add(t),document.getElementById("edCopyImgsErr").textContent="unknown filename",g.classList.remove(t);return}fetch("/editor/images/copy",{method:"POST",body:JSON.stringify({id:parseInt(v.value),target:a.value}),headers:L}).then(e=>{if(console.log(e),!e.ok){throw console.log("not ok"),new Error(f);return}return a.classList.add(n),e.json()}).catch(e=>{console.log(e),document.getElementById("edCopyImgsErr").textContent=e.message,g.classList.add(t)})}),document.getElementById("edCopyImgsReset").addEventListener("click",function(){a.value="",a.classList.remove(t),a.classList.remove(n),document.getElementById("edCopyImgsErr").textContent="",g.classList.remove(t)});const l=document.getElementById("edAnsiLove"),E=document.getElementById("edAnsiLoveList"),w=document.getElementById("edAnsiLoveBtn");l.addEventListener("input",function(d){l.classList.remove(t),l.classList.remove(n),l.value!=""}),w.addEventListener("click",function(d){if(!Array.from(E.options).some(e=>e.value===l.value)){l.classList.add(t),document.getElementById("edAnsiLoveErr").textContent="unknown filename",E.classList.remove(t);return}fetch("/editor/ansilove/copy",{method:"POST",body:JSON.stringify({id:parseInt(v.value),target:l.value}),headers:L}).then(e=>{if(console.log(e),!e.ok){throw console.log("not ok"),new Error(f);return}return l.classList.add(n),e.json()}).catch(e=>{console.log(e),document.getElementById("edAnsiLoveErr").textContent=e.message,E.classList.add(t)})}),document.getElementById("edAnsiLoveReset").addEventListener("click",function(){l.value="",l.classList.remove(t),l.classList.remove(n),document.getElementById("edAnsiLoveErr").textContent="",E.classList.remove(t)});const r=document.getElementById("recordPreviewUp"),k=document.getElementById("recordPreviewUpBtn"),C=document.getElementById("recordPreviewUpReset");r.addEventListener("change",function(d){r.value!=""&&r.classList.remove(t)}),k.addEventListener("click",function(d){if(r.value==""){r.classList.add(t),r.classList.remove(n);return}r.classList.remove(t),r.classList.remove(n),r.classList.add(n)}),C.addEventListener("click",function(d){r.value="",r.classList.remove(t),r.classList.remove(n)});const c=document.getElementById("recordArtifact"),x=document.getElementById("recordArtifactBtn"),b=document.getElementById("recordArtifactReset");c.addEventListener("change",function(d){c.value!=""&&c.classList.remove(t)}),x.addEventListener("click",function(d){if(c.value==""){c.classList.add(t),c.classList.remove(n);return}c.classList.remove(t),c.classList.remove(n),window.prompt("Replace "+c.value+`?
Type "yes" to confirm.`).toLowerCase()=="yes"&&c.classList.add(n)}),b.addEventListener("click",function(d){c.value="",c.classList.remove(t),c.classList.remove(n)});const y=document.getElementById("recordOnline"),h=document.getElementById("recordOnlineLabel");y.checked!=!0&&h.classList.add(u),y.addEventListener("change",function(d){y.checked==!0?h.classList.remove(u):h.classList.add(u)})})();

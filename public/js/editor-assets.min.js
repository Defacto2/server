/* editor-assets.min.js Â© Defacto2 2024 */
(()=>{var E=100,T=1024*1024,M=100*T;function d(s,o){if(s==null)throw new Error("The formId value of progress is null.");if(o==null)throw new Error("The elementId value of progress is null.");htmx.on(`#${s}`,"htmx:xhr:progress",function(i){i.target.id==`${s}`&&htmx.find(`#${o}`).setAttribute("value",i.detail.loaded/i.detail.total*E)})}(()=>{"use strict";d("artifact-editor-dl-form","artifact-editor-dl-progress");let s=document.getElementById("artifact-editor-dl-reset");if(s==null){console.error("the reset button is missing");return}let o=document.getElementById("artifact-editor-dl-up");if(o==null){console.error("the artifact file input is missing");return}let i=document.getElementById("artifact-editor-modal");if(i==null){console.error("the data editor modal is missing");return}let u=document.getElementById("asset-editor-modal");if(u==null){console.error("the asset editor modal is missing");return}let c=document.getElementById("emulate-editor-modal");if(c==null){console.error("the emulate editor modal is missing");return}let f=new bootstrap.Modal(i),h=new bootstrap.Modal(u),m=new bootstrap.Modal(c);switch(new URL(window.location.href).hash){case"#data-editor":f.show();break;case"#file-editor":h.show();break;case"#emulate-editor":m.show();break;default:}document.body.addEventListener("htmx:afterRequest",function(e){w(e,"artifact-editor-dl-form","artifact-editor-dl-up","artifact-editor-dl-feedback")});function w(e,t,r,n){if(e.detail.elt===null||e.detail.elt.id!==`${t}`)return;let l=document.getElementById(r);if(l===null)throw new Error(`The htmx successful input element ${r} is null`);let a=document.getElementById(n);if(a===null)throw new Error(`The htmx successful feedback element ${n} is null`);if(e.detail.successful)return p(e,l,a);if(e.detail.failed&&e.detail.xhr)return v(e,l,a);x(l,a)}function p(e,t,r){let n=e.detail.xhr;r.innerText=`${n.responseText}`,r.classList.remove("invalid-feedback"),r.classList.add("valid-feedback"),t.classList.remove("is-invalid"),t.classList.add("is-valid"),setTimeout(()=>{location.reload()},500)}function v(e,t,r){let n=e.detail.xhr;r.innerText=`Something on the server is not working, ${n.status} status: ${n.responseText}.`,r.classList.remove("valid-feedback"),r.classList.add("invalid-feedback"),t.classList.remove("is-valid"),t.classList.add("is-invalid")}function x(e,t){e.classList.remove("is-valid"),e.classList.add("is-invalid"),t.innerText="Something with the browser is not working, please try again or refresh the page.",t.classList.remove("d-none")}s.addEventListener("click",function(){o.value="",o.classList.remove("is-invalid"),o.classList.remove("is-valid")})})();})();

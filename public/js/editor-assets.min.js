/* editor-assets.min.js */
(()=>{"use strict";const g="Are you sure you want to replace ",f="yes",o="text-danger",e="is-invalid",t="is-valid",E=document.getElementById("recordID");if(E==null){console.info("the editor modal is not open so this script is not needed");return}const r=document.getElementById("recordReadme"),p=document.getElementById("recordReadmeList");r.addEventListener("input",function(d){if(r.classList.remove(e),r.classList.remove(t),r.value=="")return;if(!Array.from(p.options).some(L=>L.value===r.value)){r.classList.add(e);return}r.classList.add(t)});const a=document.getElementById("recordHideReadme"),l=document.getElementById("recordHideReadmeLabel"),m=document.getElementById("recordReadme"),y=document.getElementById("recordHideReadme"),B=document.getElementById("recordHideReadmeErr");a.checked==!0&&(l.classList.add(o),m.disabled=!0),a.addEventListener("change",function(d){a.checked==!0?(l.classList.add(o),m.disabled=!0):(l.classList.remove(o),m.disabled=!1),fetch("/editor/readme",{method:"POST",body:JSON.stringify({id:parseInt(E.value),readme:a.checked}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(i=>{if(!i.ok)throw new Error("server could not save the change");return a.classList.add(t),i.json()}).catch(i=>{B.textContent=i.message,y.classList.add(e)})});const c=document.getElementById("recordPreview"),I=document.getElementById("recordPreviewList"),h=document.getElementById("recordPreviewBtn");c.addEventListener("input",function(d){c.classList.remove(e),c.classList.remove(t),c.value!=""}),h.addEventListener("click",function(d){if(!Array.from(I.options).some(L=>L.value===c.value)){c.classList.add(e);return}c.classList.add(t)});const n=document.getElementById("recordPreviewUp"),w=document.getElementById("recordPreviewUpBtn"),k=document.getElementById("recordPreviewUpReset");n.addEventListener("change",function(d){n.value!=""&&n.classList.remove(e)}),w.addEventListener("click",function(d){if(n.value==""){n.classList.add(e),n.classList.remove(t);return}n.classList.remove(e),n.classList.remove(t),n.classList.add(t)}),k.addEventListener("click",function(d){n.value="",n.classList.remove(e),n.classList.remove(t)});const s=document.getElementById("recordArtifact"),R=document.getElementById("recordArtifactBtn"),P=document.getElementById("recordArtifactReset");s.addEventListener("change",function(d){s.value!=""&&s.classList.remove(e)}),R.addEventListener("click",function(d){if(s.value==""){s.classList.add(e),s.classList.remove(t);return}s.classList.remove(e),s.classList.remove(t),window.prompt(g+s.value+`?
Type "`+f+'" to confirm.').toLowerCase()==f&&s.classList.add(t)}),P.addEventListener("click",function(d){s.value="",s.classList.remove(e),s.classList.remove(t)});const v=document.getElementById("recordOnline"),u=document.getElementById("recordOnlineLabel");v.checked!=!0&&u.classList.add(o),v.addEventListener("change",function(d){v.checked==!0?u.classList.remove(o):u.classList.add(o)})})();

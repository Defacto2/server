/* editor-assets.min.js Â© Defacto2 2024 */
(()=>{var b=100,y=1024*1024,D=100*y;function f(l,i){if(l==null)throw new Error("The formId value of progress is null.");if(i==null)throw new Error("The elementId value of progress is null.");htmx.on(`#${l}`,"htmx:xhr:progress",function(a){a.target.id==`${l}`&&htmx.find(`#${i}`).setAttribute("value",a.detail.loaded/a.detail.total*b)})}(()=>{"use strict";f("artifact-editor-dl-form","artifact-editor-dl-progress");let l=document.getElementById("artifact-editor-dl-reset");if(l==null){console.error("the reset button is missing");return}let i=document.getElementById("artifact-editor-dl-up");if(i==null){console.error("the artifact file input is missing");return}let a=document.getElementById("artifact-editor-modal");if(a==null){console.error("the data editor modal is missing");return}let u=document.getElementById("asset-editor-modal");if(u==null){console.error("the asset editor modal is missing");return}let c=document.getElementById("emulate-editor-modal");if(c==null){console.error("the emulate editor modal is missing");return}let h=new bootstrap.Modal(a),m=new bootstrap.Modal(u),w=new bootstrap.Modal(c);switch(new URL(window.location.href).hash){case"#data-editor":h.show();break;case"#file-editor":m.show();break;case"#emulate-editor":w.show();break;default:}document.body.addEventListener("htmx:afterRequest",function(e){g(e,"artifact-editor-dl-form","artifact-editor-dl-up","artifact-editor-dl-feedback"),p(e,"artifact-editor-image-delete","artifact-editor-image-feedback"),x(e,"artifact-editor-link-delete","artifact-editor-link-feedback")});function p(e,n,r){if(e.detail.elt===null||e.detail.elt.id!==`${n}`)return;let t=document.getElementById(r);if(t===null)throw new Error(`The htmx successful feedback element ${r} is null`);let o="text-danger",s="text-success",d=e.detail.xhr;if(e.detail.successful){t.innerText="The delete request was successful, about to refresh the page.",t.classList.remove(o),t.classList.add(s),setTimeout(()=>{location.reload()},500);return}if(e.detail.failed&&e.detail.xhr){t.classList.add(o),t.innerText=`Something on the server is not working, ${d.status} status: ${d.responseText}.`;return}t.classList.add(o),t.innerText="Something with the browser is not working, please try again or refresh the page."}function x(e,n,r){if(e.detail.elt===null||e.detail.elt.id!==`${n}`)return;let t=document.getElementById(r);if(t===null)throw new Error(`The htmx successful feedback element ${r} is null`);let o="text-danger",s=e.detail.xhr;if(e.detail.successful){t.innerText=`${s.responseText}`,t.classList.remove(o);return}if(e.detail.failed&&e.detail.xhr){t.classList.add(o),t.innerText=`Something on the server is not working, ${s.status} status: ${s.responseText}.`;return}t.classList.add(o),t.innerText="Something with the browser is not working, please try again or refresh the page."}function g(e,n,r,t){if(e.detail.elt===null||e.detail.elt.id!==`${n}`)return;let o=document.getElementById(r);if(o===null)throw new Error(`The htmx successful input element ${r} is null`);let s=document.getElementById(t);if(s===null)throw new Error(`The htmx successful feedback element ${t} is null`);if(e.detail.successful)return v(e,o,s);if(e.detail.failed&&e.detail.xhr)return T(e,o,s);E(o,s)}function v(e,n,r){let t=e.detail.xhr;r.innerText=`${t.responseText}`,r.classList.remove("invalid-feedback"),r.classList.add("valid-feedback"),n.classList.remove("is-invalid"),n.classList.add("is-valid"),setTimeout(()=>{location.reload()},500)}function T(e,n,r){let t=e.detail.xhr;r.innerText=`Something on the server is not working, ${t.status} status: ${t.responseText}.`,r.classList.remove("valid-feedback"),r.classList.add("invalid-feedback"),n.classList.remove("is-valid"),n.classList.add("is-invalid")}function E(e,n){e.classList.remove("is-valid"),e.classList.add("is-invalid"),n.innerText="Something with the browser is not working, please try again or refresh the page.",n.classList.remove("d-none")}l.addEventListener("click",function(){i.value="",i.classList.remove("is-invalid"),i.classList.remove("is-valid")})})();})();

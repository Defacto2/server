/* editor-assets.min.js Â© Defacto2 2024 */
(()=>{"use strict";const s="is-invalid",n="is-valid",c="valid-feedback",r="invalid-feedback",l={"Content-type":"application/json; charset=UTF-8"},m="server could not save the change",a=document.getElementById("recordID");if(a==null){console.info("the editor modal is not open so editor assets script is not needed");return}document.getElementById("asset-editor-delete-images").addEventListener("click",function(){if(!window.confirm("Delete the previews and thumbnail?"))return;const d=document.getElementById("asset-editor-hidden"),i=document.getElementById("asset-editor-feedback");fetch("/editor/images/delete",{method:"POST",body:JSON.stringify({id:parseInt(a.value)}),headers:l}).then(o=>{if(!o.ok)throw new Error(m);return d.classList.add(n),i.classList.add(c),i.textContent="images deleted, refresh the page to see the change",o.json()}).catch(o=>{d.classList.add(s),i.classList.add(r),i.textContent=o.message})});const t=document.getElementById("asset-editor-preview"),v=document.getElementById("edUploadPreviewBtn"),u=document.getElementById("edUploadPreviewReset");t.addEventListener("change",function(){t.value!=""&&t.classList.remove(s)}),v.addEventListener("click",function(){if(t.value==""){t.classList.add(s),t.classList.remove(n);return}t.classList.remove(s),t.classList.remove(n),t.classList.add(n)}),u.addEventListener("click",function(){t.value="",t.classList.remove(s),t.classList.remove(n)});const e=document.getElementById("asset-editor-download"),f=document.getElementById("asset-editor-download-submit"),L=document.getElementById("asset-editor-download-reset");e.addEventListener("change",function(){e.value!=""&&e.classList.remove(s)}),f.addEventListener("click",function(){if(e.value==""){e.classList.add(s),e.classList.remove(n);return}e.classList.remove(s),e.classList.remove(n),window.prompt("Replace "+e.value+`?
Type "yes" to confirm.`).toLowerCase()=="yes"&&e.classList.add(n)}),L.addEventListener("click",function(){e.value="",e.classList.remove(s),e.classList.remove(n)})})();

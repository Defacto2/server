/* editor-assets.min.js */
(()=>{"use strict";const y="Are you sure you want to replace ",E="yes",a="text-danger",e="is-invalid",t="is-valid",m=document.getElementById("recordID");if(m==null){console.info("the editor modal is not open so this script is not needed");return}const d=document.getElementById("recordReadme"),h=document.getElementById("recordReadmeList");d.addEventListener("input",function(r){if(d.classList.remove(e),d.classList.remove(t),d.value=="")return;if(!Array.from(h.options).some(c=>c.value===d.value)){d.classList.add(e);return}fetch("/editor/readme/copy",{method:"POST",body:JSON.stringify({id:parseInt(m.value),target:d.value}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(c=>{if(!c.ok)throw new Error("server could not save the change");return l.classList.add(t),c.json()}).catch(c=>{p.textContent=c.message,g.classList.add(e)}),d.classList.add(t)});const l=document.getElementById("recordHideReadme"),v=document.getElementById("recordHideReadmeLabel"),u=document.getElementById("recordReadme"),g=document.getElementById("recordHideReadme"),p=document.getElementById("recordHideReadmeErr");l.checked==!0&&(v.classList.add(a),u.disabled=!0),l.addEventListener("change",function(r){l.checked==!0?(v.classList.add(a),u.disabled=!0):(v.classList.remove(a),u.disabled=!1),fetch("/editor/readme",{method:"POST",body:JSON.stringify({id:parseInt(m.value),readme:l.checked}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(o=>{if(!o.ok)throw new Error("server could not save the change");return l.classList.add(t),o.json()}).catch(o=>{p.textContent=o.message,g.classList.add(e)})});const i=document.getElementById("recordPreview"),B=document.getElementById("recordPreviewList"),I=document.getElementById("recordPreviewBtn");i.addEventListener("input",function(r){i.classList.remove(e),i.classList.remove(t),i.value!=""}),I.addEventListener("click",function(r){if(!Array.from(B.options).some(c=>c.value===i.value)){i.classList.add(e);return}i.classList.add(t)});const n=document.getElementById("recordPreviewUp"),w=document.getElementById("recordPreviewUpBtn"),k=document.getElementById("recordPreviewUpReset");n.addEventListener("change",function(r){n.value!=""&&n.classList.remove(e)}),w.addEventListener("click",function(r){if(n.value==""){n.classList.add(e),n.classList.remove(t);return}n.classList.remove(e),n.classList.remove(t),n.classList.add(t)}),k.addEventListener("click",function(r){n.value="",n.classList.remove(e),n.classList.remove(t)});const s=document.getElementById("recordArtifact"),R=document.getElementById("recordArtifactBtn"),P=document.getElementById("recordArtifactReset");s.addEventListener("change",function(r){s.value!=""&&s.classList.remove(e)}),R.addEventListener("click",function(r){if(s.value==""){s.classList.add(e),s.classList.remove(t);return}s.classList.remove(e),s.classList.remove(t),window.prompt(y+s.value+`?
Type "`+E+'" to confirm.').toLowerCase()==E&&s.classList.add(t)}),P.addEventListener("click",function(r){s.value="",s.classList.remove(e),s.classList.remove(t)});const L=document.getElementById("recordOnline"),f=document.getElementById("recordOnlineLabel");L.checked!=!0&&f.classList.add(a),L.addEventListener("change",function(r){L.checked==!0?f.classList.remove(a):f.classList.add(a)})})();

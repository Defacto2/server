/* editor-assets.min.js Â© Defacto2 2024 */
(()=>{var L=100,$=1024*1024,H=100*$;function c(s,l){if(s==null)throw new Error("The formId value of progress is null.");if(l==null)throw new Error("The elementId value of progress is null.");htmx.on(`#${s}`,"htmx:xhr:progress",function(a){a.target.id==`${s}`&&htmx.find(`#${l}`).setAttribute("value",a.detail.loaded/a.detail.total*L)})}(()=>{"use strict";c("artifact-editor-dl-form","artifact-editor-dl-progress"),c("artifact-editor-preview-form","artifact-editor-preview-progress");let s=document.getElementById("artifact-editor-preview-reset");if(s==null){console.error("the reset preview button is missing");return}let l=document.getElementById("artifact-editor-replace-preview");if(l==null){console.error("the form preview input is missing");return}let a=document.getElementById("artifact-editor-dl-reset");if(a==null){console.error("the reset button is missing");return}let u=document.getElementById("artifact-editor-dl-up");if(u==null){console.error("the artifact file input is missing");return}let d=document.getElementById("artifact-editor-modal");if(d==null){console.error("the data editor modal is missing");return}let f=document.getElementById("asset-editor-modal");if(f==null){console.error("the asset editor modal is missing");return}let h=document.getElementById("emulate-editor-modal");if(h==null){console.error("the emulate editor modal is missing");return}let v=new bootstrap.Modal(d),g=new bootstrap.Modal(f),T=new bootstrap.Modal(h),m=new URL(window.location.href);switch(m.hash){case"#data-editor":v.show();break;case"#file-editor":g.show();break;case"#emulate-editor":T.show();break}m.hash!==""&&history.replaceState(null,"",window.location.pathname),document.body.addEventListener("htmx:afterRequest",function(e){p(e,"artifact-editor-dl-form","artifact-editor-dl-up","artifact-editor-dl-feedback"),p(e,"artifact-editor-preview-form","artifact-editor-replace-preview","artifact-editor-preview-feedback"),w(e,"artifact-editor-image-delete","artifact-editor-image-feedback"),w(e,"artifact-editor-image-pixelate","artifact-editor-preview-feedback"),E(e,"artifact-editor-link-delete","artifact-editor-link-feedback")});function w(e,o,r){if(e.detail.elt===null||e.detail.elt.id!==`${o}`)return;let t=document.getElementById(r);if(t===null)throw new Error(`The htmx successful feedback element ${r} is null`);let n="text-danger",i="text-success",x=e.detail.xhr;if(e.detail.successful){t.innerText="The delete request was successful, about to refresh the page.",t.classList.remove(n),t.classList.add(i),setTimeout(()=>{location.reload()},500);return}if(e.detail.failed&&e.detail.xhr){t.classList.add(n),t.innerText=`Something on the server is not working, ${x.status} status: ${x.responseText}.`;return}t.classList.add(n),t.innerText="Something with the browser is not working, please try again or refresh the page."}function E(e,o,r){if(e.detail.elt===null||e.detail.elt.id!==`${o}`)return;let t=document.getElementById(r);if(t===null)throw new Error(`The htmx successful feedback element ${r} is null`);let n="text-danger",i=e.detail.xhr;if(e.detail.successful){t.innerText=`${i.responseText}`,t.classList.remove(n);return}if(e.detail.failed&&e.detail.xhr){t.classList.add(n),t.innerText=`Something on the server is not working, ${i.status} status: ${i.responseText}.`;return}t.classList.add(n),t.innerText="Something with the browser is not working, please try again or refresh the page."}function p(e,o,r,t){if(e.detail.elt===null||e.detail.elt.id!==`${o}`)return;let n=document.getElementById(r);if(n===null)throw new Error(`The htmx successful input element ${r} is null`);let i=document.getElementById(t);if(i===null)throw new Error(`The htmx successful feedback element ${t} is null`);if(e.detail.successful)return b(e,n,i);if(e.detail.failed&&e.detail.xhr)return y(e,n,i);k(n,i)}function b(e,o,r){let t=e.detail.xhr;r.innerText=`${t.responseText}`,r.classList.remove("invalid-feedback"),r.classList.add("valid-feedback"),o.classList.remove("is-invalid"),o.classList.add("is-valid"),setTimeout(()=>{location.reload()},500)}function y(e,o,r){let t=e.detail.xhr;r.innerText=`Something on the server is not working, ${t.status} status: ${t.responseText}.`,r.classList.remove("valid-feedback"),r.classList.add("invalid-feedback"),o.classList.remove("is-valid"),o.classList.add("is-invalid")}function k(e,o){e.classList.remove("is-valid"),e.classList.add("is-invalid"),o.innerText="Something with the browser is not working, please try again or refresh the page.",o.classList.remove("d-none")}a.addEventListener("click",function(){u.value="",u.classList.remove("is-invalid","is-valid")}),s.addEventListener("click",function(){l.value="",l.classList.remove("is-invalid","is-valid")})})();})();

/* editor-assets.min.js Â© Defacto2 2024 */
(()=>{var k=100,L=1024*1024,H=100*L;function d(s,a){if(s==null)throw new Error("The formId value of progress is null.");if(a==null)throw new Error("The elementId value of progress is null.");htmx.on(`#${s}`,"htmx:xhr:progress",function(l){l.target.id==`${s}`&&htmx.find(`#${a}`).setAttribute("value",l.detail.loaded/l.detail.total*k)})}(()=>{"use strict";d("artifact-editor-dl-form","artifact-editor-dl-progress"),d("artifact-editor-preview-form","artifact-editor-preview-progress");let s=document.getElementById("artifact-editor-preview-reset");if(s==null){console.error("the reset preview button is missing");return}let a=document.getElementById("artifact-editor-replace-preview");if(a==null){console.error("the form preview input is missing");return}let l=document.getElementById("artifact-editor-dl-reset");if(l==null){console.error("the reset button is missing");return}let c=document.getElementById("artifact-editor-dl-up");if(c==null){console.error("the artifact file input is missing");return}let f=document.getElementById("artifact-editor-modal");if(f==null){console.error("the data editor modal is missing");return}let h=document.getElementById("asset-editor-modal");if(h==null){console.error("the asset editor modal is missing");return}let m=document.getElementById("emulate-editor-modal");if(m==null){console.error("the emulate editor modal is missing");return}let x=new bootstrap.Modal(f),v=new bootstrap.Modal(h),g=new bootstrap.Modal(m);switch(new URL(window.location.href).hash){case"#data-editor":x.show(),history.replaceState(null,"",window.location.pathname);break;case"#file-editor":v.show(),history.replaceState(null,"",window.location.pathname);break;case"#emulate-editor":g.show(),history.replaceState(null,"",window.location.pathname);break;default:}document.body.addEventListener("htmx:afterRequest",function(e){w(e,"artifact-editor-dl-form","artifact-editor-dl-up","artifact-editor-dl-feedback"),w(e,"artifact-editor-preview-form","artifact-editor-replace-preview","artifact-editor-preview-feedback"),u(e,"artifact-editor-image-delete","artifact-editor-image-feedback"),u(e,"artifact-editor-imagepreview-delete","artifact-editor-image-feedback"),u(e,"artifact-editor-imagethumb-delete","artifact-editor-image-feedback"),u(e,"artifact-editor-image-pixelate","artifact-editor-preview-feedback"),T(e,"artifact-editor-link-delete","artifact-editor-link-feedback")});function u(e,o,r){if(e.detail.elt===null||e.detail.elt.id!==`${o}`)return;let t=document.getElementById(r);if(t===null)throw new Error(`The htmx successful feedback element ${r} is null`);let n="text-danger",i="text-success",p=e.detail.xhr;if(e.detail.successful){t.innerText="The delete request was successful, about to refresh the page.",t.classList.remove(n),t.classList.add(i),setTimeout(()=>{location.reload()},500);return}if(e.detail.failed&&e.detail.xhr){t.classList.add(n),t.innerText=`Something on the server is not working, ${p.status} status: ${p.responseText}.`;return}t.classList.add(n),t.innerText="Something with the browser is not working, please try again or refresh the page."}function T(e,o,r){if(e.detail.elt===null||e.detail.elt.id!==`${o}`)return;let t=document.getElementById(r);if(t===null)throw new Error(`The htmx successful feedback element ${r} is null`);let n="text-danger",i=e.detail.xhr;if(e.detail.successful){t.innerText=`${i.responseText}`,t.classList.remove(n);return}if(e.detail.failed&&e.detail.xhr){t.classList.add(n),t.innerText=`Something on the server is not working, ${i.status} status: ${i.responseText}.`;return}t.classList.add(n),t.innerText="Something with the browser is not working, please try again or refresh the page."}function w(e,o,r,t){if(e.detail.elt===null||e.detail.elt.id!==`${o}`)return;let n=document.getElementById(r);if(n===null)throw new Error(`The htmx successful input element ${r} is null`);let i=document.getElementById(t);if(i===null)throw new Error(`The htmx successful feedback element ${t} is null`);if(e.detail.successful)return E(e,n,i);if(e.detail.failed&&e.detail.xhr)return b(e,n,i);y(n,i)}function E(e,o,r){let t=e.detail.xhr;r.innerText=`${t.responseText}`,r.classList.remove("invalid-feedback"),r.classList.add("valid-feedback"),o.classList.remove("is-invalid"),o.classList.add("is-valid"),setTimeout(()=>{location.reload()},500)}function b(e,o,r){let t=e.detail.xhr;r.innerText=`Something on the server is not working, ${t.status} status: ${t.responseText}.`,r.classList.remove("valid-feedback"),r.classList.add("invalid-feedback"),o.classList.remove("is-valid"),o.classList.add("is-invalid")}function y(e,o){e.classList.remove("is-valid"),e.classList.add("is-invalid"),o.innerText="Something with the browser is not working, please try again or refresh the page.",o.classList.remove("d-none")}l.addEventListener("click",function(){c.value="",c.classList.remove("is-invalid","is-valid")}),s.addEventListener("click",function(){a.value="",a.classList.remove("is-invalid","is-valid")})})();})();
